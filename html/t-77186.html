<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Multiple settings superscope"><title>Multiple settings superscope - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"></noscript> <script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-85.html">AVS</a></li><li class="active">Multiple settings superscope</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=77186">Multiple settings superscope</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br></p><p class="post-time small text-muted">24th February 2002 01:31 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Multiple settings superscope</strong><br>I'm trying to make a superscope that changes between a number of different settings (i.e., ring, anchored scope, cross, flying vu, etc.). But I can't figure out the timing. Any help...?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">24th February 2002 23:55 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Suppose you have four different 'shapes'. Let 'sh' be a number from 0 to 3 that defines which shape you're drawing. You can either increase it every beat (sh=(sh+1)%4) or set it randomly (sh=rand(4)), or whatever.<br><br>Calculate your shapes like this:<br></p><pre>
<code>csh</code>=sh<span style="color: #007700">;
<br></span>x=if(csh,0,xcodefor1stshape<span style="color: #007700">);
<br></span>y=if(csh,0,ycodefor1stshape<span style="color: #007700">);
<br></span>csh=csh-1<span style="color: #007700">;
<br></span>x=if(csh,x,xcodefor2ndshape<span style="color: #007700">);
<br></span>y=if(csh,y,ycodefor2ndshape<span style="color: #007700">);
<br></span>csh=csh-1<span style="color: #007700">;
<br></span>x=if(csh,x,xcodefor3rdshape<span style="color: #007700">);
<br></span>y=if(csh,y,ycodefor3rdshape<span style="color: #007700">);
<br></span>csh=csh-1<span style="color: #007700">;
<br></span>x=if(csh,x,xcodefor4thshape<span style="color: #007700">);
<br></span>y=if(csh,y,ycodefor4thshape<span style="color: #007700">);
</span>
</pre>What happens is this...<br>
      First, csh is set to the current shape number. We do this because we're going to work with the shape number, but we don't want to change the original value.<br>
      Then we check if csh is zero. We do this by using the variable as the condition: this has the effect that anything non-zero is 'true', and zero is 'false'.<br>
      So, if 'sh = 0', then the 1st shape-code gets executed (the condition is false). In any other case (sh = 1, 2 or 3), the condition will be true and x,y will be zero. Then, we decrease the shape number (in csh). Now, when we evaluate 'csh', it will be zero only when the 2nd shape is selected. In the other cases, csh will either be -1, 1 or 2.<br>
      We decrease again, and it'll only be true when the 3rd shape is selected, and so on.<br>
      <br>
      A simpler approach is to calculate x1,y1,x2,y2,... and assign x,y depending on 'sh', but that way, you calculate 4 shapes regardless of which is selected. In my approach, you'll always calculate exactly one shape, which is fastest.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br></p>

      <p class="post-time small text-muted">25th February 2002 07:20 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I knew how to calculate the shapes, I just needed to find out how to time it correctly. What I'm trying to get is something that will morph between the shapes, like in your "Reflect on it," just with 5 shapes (more or less) instead of 2. I've figured out how to fade between two, it's fairly simple (i'll use a circle and a cross here):<br>
      <br>
      init:<br>
      <br>
      n=579; tpi=acos(-1)*2<br>
      <br>
      frame:<br>
      <br>
      t=t-0.01;<br>
      <br>
      pixel:<br>
      <br>
      circ=i*tpi; sx1=sin(c); sy1=cos(c);<br>
      test=above(i,0.5); sx2=if(test,i*4-3,0); sy2=if(test,0,i*4-1);<br>
      x1=sx1*sin(t)+sx2*cos(t); y1=sy1*sin(t)+sy2*cos(t); z1=v/3;<br>
      continue...<br>
      <br>
      But it's when you add the third shape that things get confusing. My best guess is that you need to create 3 timers; one for each shape. So what you get is this (i'll now add the "anchored scope"):<br>
      <br>
      init:<br>
      <br>
      n=579; tpi=acos(-1)*2<br>
      <br>
      frame:<br>
      <br>
      at=(at+0.1)%100; s=(s+equal(at,0))%3; ts1=if(s,if(above(ts1,0.04),ts1-0.05,0),if(below(ts1,0.96),ts1+0.05,1)); ts2=if(s-1,if(above(ts2,0.04),ts1-0.05,0),if(below(ts2,0.96),ts1+0.05,1)); ts3=if(s-2,if(above(ts1,0.04),ts1-0.05,0),if(below(ts1,0.96),ts1+0.05,1));<br>
      <br>
      pixel:<br>
      <br>
      circ=i*tpi;<br>
      sx1=sin(circ); sy1=cos(circ); sz1=v/3;<br>
      test=above(i,0.5); sx2=if(test,i*4-3,0); sy2=if(test,i*4-1,0); sz2=v/3;<br>
      sx3=i; sy3=v*i;<br>
      x1=sx1*ts1+sx2*ts2+sx3*ts3;<br>
      y1=sy1*ts1+sy2*ts2+sy3*ts3;<br>
      z1=sz1*ts1+sz2*ts2;<br>
      continue...<br>
      <br>
      which makes at ("alarm timer") hit zero every thousanth frame, which increments s, which sets off the shape timers. This really should work, but apparently it doesn't...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p>

      <p class="post-time small text-muted">25th February 2002 07:54 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">It really depends on what you want to do. If you want to morph between the 5 shapes independantly, you'll need 'n' weights in the range of 0-1 that add up to 1 (for the most desirable effect). You'll need to find a function that passes through most of the n-space containing all possible values.<br>
      <br>
      If you just want to go from A to B, then from B to C, etc., you can use the code I wrote below for jumping from one shape into another. Simply use "from A to B" as shape one, "from B to C" as shape two, etc.<br>
      <br>
      Something like this (I use PHP style code for hilighting):<br></p>
      <pre>
<code>init</code><span style="color: #007700">{
<br></span>ip=0<span style="color: #007700">;
<br></span>sh=0<span style="color: #007700">;
<br>}
<br><br></span>frame<span style="color: #007700">{
<br></span>ip=ip+0.01;next=equal(ip,1<span style="color: #007700">);
<br></span>sh=if(next,(sh+1)%4,sh<span style="color: #007700">);
<br></span>ip=if(next,0,ip<span style="color: #007700">);
<br>}
</span>
</pre>This will have a value 'ip' that just goes from 0 to 1 and returns to 0 afterwards, and a value 'sh' that will increase every time 'ip' is wrapped around. So if your first shape uses 'ip' to interpolate between x1 and x2, and the second shape uses 'ip' to interpolate between x2 and x3, you'll get a nice morph from x1 to x3, passing through x2.
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">LittleBuddy88</span><br></p>

      <p class="post-time small text-muted">25th February 2002 21:21 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Atero, I think I've done a similar morphing sequence once, reacting on beat, but otherwise equal to what you did.<br>
      And I can see but one problem with your code, I don't know if more exists, I just looked through it quickly, but simple, I think AVS sets ANY non-zero value to TRUE, this means that all of your scopes are executed, except one...<br>
      Not sure if that's the case though :/<br>
      1 more thing, I'm not 100% sure if the % operator works with float values...<br>
      <br>
      <br>
      Linus</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">BlurPak2k1</span><br></p>

      <p class="post-time small text-muted">26th February 2002 01:54 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">okay i got the first one (random number change (and i even used it :D))<br>
      but the other two....<br>
      <br>
      <br>
      ...well you, eh, lost me :D</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br></p>

      <p class="post-time small text-muted">26th February 2002 02:54 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I think I've finally figured it out! I used this exact code for a color changing circle, cross, and anchored scope:<br>
      <br>
      init:<br>
      n=579; tpi=acos(-1)*2; ixyt=rand(100)/1000-0.05; ixzt=rand(100)/1000-0.05; iyzt=rand(100)/1000-0.05; sr=rand(100)/200; sg=rand(100)/200; sb=rand(100)/200;<br>
      <br>
      beat:<br>
      ixyt=rand(100)/1000-0.05; ixzt=rand(100)/1000-0.05; iyzt=rand(100)/1000-0.05; sr=rand(100)/200; sg=rand(100)/200; sb=rand(100)/200;<br>
      <br>
      frame:<br>
      at=(at+1)%1000; c=equal(at,0); s=if(c,s+1,s)%3; s1=equal(s,0); s2=equal(s,1); s3=equal(s,2); ts1=t*s1+(1-t)*s2; ts2=t*s2+(1-t)*s3; ts3=t*s3+(1-t)*s1; t=if(c,0,t+0.01*below(t,1)); xyt=xyt+ixyt; xzt=xzt+ixzt; yzt=yzt+iyzt; r=r*0.9+sr/10; g=g*0.9+sg/10; bl=bl*0.9+sb/10;<br>
      <br>
      pixel:<br>
      circ=i*tpi; sx1=sin(circ); sy1=cos(circ); sz1=v/3;<br>
      test=above(i,0.5);<br>
      sx2=if(test,i*4-3,0); sy2=if(test,0,i*4-1);<br>
      sz2=v/3; sx3=i; sy3=v*i; sz3=0;<br>
      x1=sx1*ts1+sx2*ts2+sx3*ts3;<br>
      y1=sy1*ts1+sy2*ts2+sy3*ts3;<br>
      z1=sz1*ts1+sz2*ts2+sz3*ts3;<br>
      x2=x1*sin(xyt)-y1*cos(xyt); y2=x1*cos(xyt)+y1*sin(xyt);<br>
      x3=x2*sin(xzt)-z1*cos(xzt); z2=x2*cos(xzt)+z1*sin(xzt);<br>
      y3=y2*sin(yzt)-z2*cos(yzt); z3=y2*cos(yzt)+z2*sin(yzt);<br>
      x=x3/(z3/2+1); y=y3/(z3/2+1);<br>
      red=r*2; green=g*2; blue=bl*2;<br>
      <br>
      <br>
      And it works, perfectly! Yay happy. Thanx for the code, though, UnConeD, I learned from it (seriously; i've been trying to figure out ways of speeding up these kinds of things)<br>
      I was going to add in a flying VU, but then AVS turned nazi on me, and when I was about to add the code, it brought up the "Winamp tried to buy drugs from an illegal alien prostitute in a chop shop and will be shut down" message and I hit spacebar before I could read it, so Windows (which was nazi in the first place) closed the program before I could save. Anyway, if anyone wants to use this code, go ahead...<br>
      <br>
      Edit:<br>
      This means the code for morphing scopes is this:<br>
      <br>
      frame:<br>
      at=(at+1)%HT; c=equal(at,0); s=if(c,s+1,s)%NS; s1=equal(s,0); s2=equal(s,1); s3=equal(s,2);<br>
      ...repeat this type of statement NS times<br>
      ts1=t*s1+(1-t)*s2; ts2=t*s2+(1-t)*s3; ts3=t*s3+(1-t)*s4;<br>
      ...repeat this type of statement NS times, making sure the last one ends with ...+(1-t)*s1<br>
      t=if(c,0,t+0.01*below(t,1));<br>
      <br>
      pixel:<br>
      (shapes go here, label them s(AXIS)(SHAPE))<br>
      x=sx1*ts1+sx2*ts2+sx3*ts3...; repeat that block (sxn*tsn) NS times<br>
      and you can repeat that entire statement for 2 or 3 axes, replacing x with y and z, of course.<br>
      <br>
      MT=time taken for the shape to change, in frames<br>
      NS=number of shapes used<br>
      AXIS=the axis (x and y, and z if you're using a 3D scope)<br>
      SHAPE=the shape number you're coding<br>
      <br>
      If anyone still finds this vague, just ask...</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">BlurPak2k1</span><br></p>

      <p class="post-time small text-muted">27th February 2002 18:24 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">i cant really tell where your circle is in your code there but...<br>
      <br></p>
      <pre>
<code><br><font color="blue">int:</font> <br> x=sin(t+i)+v;<br> y=cos(t+i);<br> red=cos(tan(t)+x);<br> green=sin(tan(-t)+y);<br> blue=cos(tan(x-y));<br></code>
</pre>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script>
  <script type="text/javascript" src="../js/scripts.js" defer></script></body></html>