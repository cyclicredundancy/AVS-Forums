<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Preset movement math"><title>Preset movement math - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"></noscript> <script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-85.html">AVS</a></li><li class="active">Preset movement math</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=70899">Preset movement math</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">geozop</span><br></p><p class="post-time small text-muted">5th January 2002 18:00 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Preset movement math</strong><br>I have usually found that when using a preset movement, it doesn't quite move fast enough, rotate enough at a certain distance, or something that doesn't quite make it useful for what I need; even though it was quite close. Unfortunately, it does not tell you the math/equations that are the presets. If those were known<br><br>Some movements are easy enough to figure out the equations (such as shift rotate left), but others (like blocky partial out) elude me. I assume other AVS creators have similar problems, so I thought a topic for reverse-engineering these movement could help everyone.<br><br>Some that I have "decoded":<br><br>big swirl out:<br>d=d-sin(d)/25;<br>r=r-0.2*(d-0.5)<br><br>medium swirl:<br>d=d+0.001;<br>r=r-0.025*cos(d*16)<br><br>sunburster:<br>d=d-(sin(d)*0.1*abs(sin(r*18)));<br>r=r+0.004<br>(I find that this works better than the preset, because ther preset has an up-and-left movement, in addition to the sunbursting)<br><br>swirling around both ways at once:<br>d=d+0.001;<br>r=r-0.1*cos(d*16+0.75)<br>(four times more than medium swirl, with a bit of an offset)<br><br>bubbling ******ds:<br>d=d-0.025*pow(1.33*sin(d*2*1.57)-0.25,4);<br>r=r-log(0.01+d)/100<br>(same thing as with sunburster, but the movement of the center did not look good without the r movement)<br><br>5 pointed distro:<br>d=d-0.1*sin(d)*abs(sin(r*2.5+1.57));<br>r=r+0.005<br>(it's a good likeness, but it's not as exact as I'd like)<br><br>I think blocky partial out can be done using rect coordinates... Slight fuzzify looks like it could be done like the swirl to center preset, except that the swirls are only a few pixels wide, rather than a third of the screen.<br><br>Hope that helped...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Montana</span><br></p><p class="post-time small text-muted">5th January 2002 19:31 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">big thanks, (i think)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">5th January 2002 21:57 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>tunnel...</strong><br>This one approximates the tunnel movement. The real 'tunnel' seems to have its rotation point slightly to the left of the center, but other than that it's near perfect.<br><br>df=d-.16;df=if(below(df,0.02),0.02,df);<br>d=d-sqr(df)*.23;r=r+0.035<br><br>A tip for decoding the movements is to create a preset that contains this:<br><br>-Effect List (Input: ignore / Output: replace)<br>Simple -&gt; Oscilloscope Dots<br>Movement (Original)<br>-Effect List (Input: ignore / Output: subtractive blend 1)<br>Simple -&gt; Oscilloscope Dots<br>Movement (Your own)<br><br>Now you will see the difference between the two movements. The brighter the picture, the worse you're doing. You should also see your movement as a 'black layer' over the original. It can help you decode the movement.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Montana</span><br></p><p class="post-time small text-muted">5th January 2002 22:00 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">unconed, whatta hell u talking about<br>tunneling movement is<br>d=sin(d);r=0.05+r</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">5th January 2002 22:04 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Hell?</strong><br>I was "watta hell" talking about another solution for the tunnel which I found experimentally. You found a shorter one, nice. If you compare the two graphs (pop the formula in a superscope and plot them), you'll see that mine strongly resembles a sine-wave near 0-1.<br>I checked your solution with the two-effect-list trick though and it seems the rotation factor is slightly too high.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Montana</span><br></p><p class="post-time small text-muted">5th January 2002 22:10 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">adjust 0.05 to the value you want then</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">BlurPak2k1</span><br></p><p class="post-time small text-muted">6th January 2002 00:19 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">well i sound this out too.<br>but d=sin(d); and d=atan(d); have simular effect as well.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">6th January 2002 04:23 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Blocky partial out</strong><br>By the way I think it's (sorta) impossible to do blocky partial out for now. I remember AVS not providing width/height in the movement, so you could only make it work on one resolution.<br><br>Of course you can make something close, but the real idea here is to get exact copies right?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Montana</span><br></p><p class="post-time small text-muted">6th January 2002 13:14 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">blur&gt;&gt; not really, d=sin(d) has a move "tunnel-like" depth, while d=atan(d), cuts the whole picture in2 4 parts,<br><br>unconed&gt;&gt; can u do the decode the "bleedin" movement</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">TasZ69</span><br></p><p class="post-time small text-muted">1st October 2006 21:34 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Bleedin<br><br>d=atan(d)*1.05;<br>r=.01+r;<br><br>I'm pretty sure this is it. i've got a slight problem remembering it right now.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">2nd October 2006 07:14 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">welcome to 2006.<br><br>the code for bleedin' <u>is</u>:<br>t = cos(d * $PI);<br>r = r + (0.07 * t);<br>d = d * (0.98 + t * 0.10);</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mr_Nudge</span><br></p><p class="post-time small text-muted">2nd October 2006 16:02 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">who uses preset movement anyway?</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">2nd October 2006 17:08 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">oh, I see this is your first post here.. Welcome!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">TasZ69</span><br></p><p class="post-time small text-muted">4th October 2006 00:52 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">ya, that was my first. i'm using a friends internet cuz i don't have any, so i couldn't check to see i was right. mine's actually kinda close. it's something from a really old avs i made when i first got winamp (2.something I think). but ya, thanx for the welcome.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Montana</span><br></p><p class="post-time small text-muted">4th October 2006 09:29 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">oh god at the noobness of me. i'm uberembarrased.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">StevenRoy</span><br></p><p class="post-time small text-muted">4th October 2006 09:46 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Oh, it's possible to do a "Blocky Partial Out". I've recently experimented with some very similar effects in Movement code. The trick is to use extra variables to actually COUNT the pixels (instead of relying on sw and sh). For example:<br><br>nr=equal(y,yy); <i>// "New Row" is 0 when y changes.</i><br>nx=nr*((nx+1)&amp;3); <i>// Either increment or reset nx (from 0 to 3)</i><br>ny=(ny+bnot(nr))&amp;3; <i>// Increment ny (from 0 to 3) when y changes</i><br>yy=y; <i>// This is how we tell when it changes.</i><br><br>vx=if(nx,vx,x); <i>// Save X and Y coordinates for each 4x4 square's</i><br>vy=if(ny-1,vy,y); <i>// upper left pixel.</i><br><br>insq=(nx&amp;2)|((ny-1)&amp;2); <i>// "In square" is 0 if we're in one of the 2x2 squares.</i><br>x=if(insq,x,(vx*7)/8); <i>// If we are, perform the magic!</i><br>y=if(insq,y,(vy*7)/8);<br><br>Well, it's still not -exactly- like the BPO, but it's the best approximation I can come up with this late at night.<br><br>This pixel-counting trick is so unobvious (especially for something like a Movement that isn't dynamic!), I was -so- tempted to keep it a secret, just so that I could use it in a preset (for the compilation, of course) and then have a bunch of people thinking "How the heck did he do that?" ...I love when people think that!<br><br>But there it is.<br><br>I bet you guys (well, a few of you) can turn it into all sorts of nifty stuff now! Have fun!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">5th October 2006 16:16 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><i>Originally posted by Mr_Nudge</i><br><b>who uses preset movement anyway?</b></blockquote>I love movement. Good for making arbitrarily complex raytraces in realtime :) (given a small loading time) Also there are other nifty tricks you can do with its per-pixel accuracy which dynamic movement forbids with its terrible resolution. See 'Jheriko - There is no Spoon'.<br><br>StevenRoy: I hate to belittle your fantastic discovery, but why not use sw and sh? Counting those pixels is a good idea, but more work (code) for no obvious benefit (to me). I'd also be willing to bet someone has done the counting trick before since it is quite trivial.<br><br>BTW: Another good place to 'count pixels' is in a Dynamic Movement, althought the utility is somewhat different: you can 'count' the current position in the grid and use it to access (g)megabuf for whatever reason. (Creating a faster Whittaker solver maybe ;) )<br><br>Anyway, maybe someone should lock this age-old thread now that the problems are solved and it is outdated?</div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script><script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script><script type="text/javascript" src="../js/scripts.js" defer></script></body></html>