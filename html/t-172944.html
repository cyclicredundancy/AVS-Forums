<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="inverse-bezier-curve math problem" />

  <title>inverse-bezier-curve math problem - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <div class="row">
        <div class="dropdown pull-right">
          <button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            Change style
            <span class="caret"></span>
          </button>
          <ul id="css-select" class="dropdown-menu" role="menu">
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Default</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation" class="dropdown-header">Bootswatch</li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/amelia/bootstrap.min.css">Amelia</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cerulean/bootstrap.min.css">Cerulean</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cosmo/bootstrap.min.css">Cosmo</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cyborg/bootstrap.min.css">Cyborg</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/flatly/bootstrap.min.css">Flatly</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/journal/bootstrap.min.css">Journal</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Readable</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/simplex/bootstrap.min.css">Simplex</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/slate/bootstrap.min.css">Slate</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/spacelab/bootstrap.min.css">Spacelab</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/united/bootstrap.min.css">United</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/yeti/bootstrap.min.css">Yeti</a></li>
          </ul>
        </div>
    </div>

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-137.html">AVS Presets</a></li>

      <li class="active">inverse-bezier-curve math problem</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=172944">inverse-bezier-curve math problem</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">your-dentist</span><br /></p>

      <p class="post-time small text-muted">11th March 2004 10:44 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>inverse-bezier-curve math problem</strong><br />
      after playing around a lot with those cute bezier-curves, i tried to make some kind of inverse-bezier-curve.<br />
      you simply "tell" the curve through which points it should pass and then it calculates the required control-points.<br />
      doing this for a cubic bezier-curve was easy as 3.1415926. then i tried the same for a quartic curve, in order to find some<br />
      kind of universal formula for inverse-bezier-curve, and must've made a mistake. the curve deforms almost as expected, just<br />
      a bit too much. i'll post my solution for the equations here, maybe you can find what i missed.<br />
      <br />
      (sorry for my math-english)<br />
      <br />
      the basics:<br />
      4 points, which lie on the curve, are defined.<br />
      i=0, i=1/3, i=2/3 and i=1<br />
      beziercurvefunction:<br />
      (ni=1-i P1,P2,P3 and P4 are the four control points))<br />
      ni*ni*ni*P1 + 3*ni*ni*i*P2 + 3*ni*i*i*P3 + i*i*i*P4<br />
      <br />
      so the following applies for the four custom points:<br />
      for i=0: P1<br />
      for i=1/3: 8*P1/27 + 12*P2/27 + 6*P3/27 + P4/27<br />
      for i=2/3: P1/27 + 6*P2/27 + 12*P3/27 + 8*P4/27<br />
      for i=1: P4<br />
      <br />
      so we've got P1 and P4, now we need formulas for P2 and P3<br />
      (P(1/3) is the second custom point, the others are control points)<br />
      P2 = 27/12*(P(1/3) - 8*P1/27 - 6*P3/27 - P4/27);<br />
      P3 = 27/12*(P(2/3) - P1/27 - 6*P2/27 - 8*P4/27);<br />
      <br />
      now i combine these two equations to this one<br />
      P3 = 27/12*(P(2/3) - P1/27 - 6*(27/12*(P(1/3) - 8*P1/27 - 6*P3/27 - P4/27))/27 - 8*P4/27); |apply factors<br />
      P3 = 27/12*(P(2/3) - P1/27 - 0.5*(P(1/3) - 8*P1/27 - 6*P3/27 - P4/27) - 8*P4/27); |again<br />
      P3 = 27/12*(P(2/3) - 5*P1/27 - 0.5*P(1/3) - 3*P3/27 - 8.5*P4/27); |sum up<br />
      P3 = 27*P(2/3)/12 - 5*P1/12 - 27*P(1/3)/24 - P3/4 - 17*P4/24; |apply factors again<br />
      P3 = 4/5*(27*P(2/3)/12 - 5*P1/12 - 27*P(1/3)/24 - 17*P4/24); |+P3/4 |/1.25<br />
      P3 = 1.8*P(2/3)3 - P1/3 - 0.9*P(1/3) - 17*P4/30 |apply factors one last time<br />
      <br />
      so for P2 we've got:<br />
      P2 = 1.8*P(1/3)3 - P4/3 - 0.9*P(2/3) - 17*P1/30<br />
      <br />
      <br />
      <br />
      that's it. i've already killed tons of stupid mistakes, but there must be one very persistent mistake.<br />
      <br />
      btw: if you know this holy universal inverse-bezier-curve-formula-thingy, please tell me! :)<br />
      <br />
      thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jheriko</span><br /></p>

      <p class="post-time small text-muted">15th March 2004 00:50 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">The problem could simply be that there is more than one possible patch that can pass through any given set of points. Your maths could be correct.<br />
      <br />
      However from what I know about patches and splines (not just bezier) in general making a quartic spline pass through 5 points requires the solution to a quartic equation.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">your-dentist</span><br /></p>

      <p class="post-time small text-muted">15th March 2004 10:10 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">i also thought that there is more than one possible solutions. but it works quite fine for the quadratic (is it cubic or quadratic? it's got second degree) thingy.<br />
      and in graphic programs like blender, gimp, or 3dsmax i've those "inverse-bezier-curves", so there must be a way to do it. maybe someone who's good at coding can look at the gimp source (it's opensource) and tell me how they made it, *hrhr*.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br /></p>

      <p class="post-time small text-muted">15th March 2004 12:31 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I think in The Gimp or Max, the curves are just piecewise beziers between each point, with the control points calculated/estimated based on the existing points.<br />
      <br />
      Or maybe they're not beziers at all, remember there are endless types of splines.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jheriko</span><br /></p>

      <p class="post-time small text-muted">16th March 2004 03:02 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I'm pretty certain that there is only one parabola through any three distinct points, this is why the quadratic version worked. :P<br />
      <br />
      I know that four points on a conic section are enough to reconstruct the entire section.<br />
      <br />
      For a cubic case though it is easy to see how and four distinct points will be able to define an infinity of curves.<br />
      <br />
      I would doubt that something like MAX would use such a silly method for constructing splines/patches. Trying to make a Bezier curve pass through specific points is a waste of time, why not just make a new type of spline which does pass through its control points? This is infact a much simpler problem and can be dealt with very easily for the first few cases (2,3 or 4 points). Think about the method for finding the equation of a line from two points.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">your-dentist</span><br /></p>

      <p class="post-time small text-muted">16th March 2004 11:03 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><a href="http://collective.valve-erc.com/data/docs/1031593122-87996800/files/gimp_curves_inverse_bezier.png" target="_blank">http://collective.valve-erc.com/data...rse_bezier.png</a><br />
      //edit: hm, I thought the [IMG] tag would make the image appear in the post, well it doesn't so please click this link.<br />
      An image of those curves thingies in the GIMP.<br />
      I dunno how they made it and I'm notgood at reading c++ code.<br />
      You're talking about splines all the time. The curves I want to make needn't be beziers, I just want the math for a "go-through-all-those-points-curve", so please tell me more about those splines (I knew them from blender, but was unable to math stuff about it).<br />
      One more about this quadratic bezier curve. Afaik a quadratic equation has up to two possible solutions, so why does this work?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jheriko</span><br /></p>

      <p class="post-time small text-muted">16th March 2004 13:43 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">A quadratic having two possible solutions and a quadratic passing through three points are seperate things... i don't even know if what i said about that was right. After more thought on the quadratic bezier I realised that the 'middle' control point needn't be central on the curve and so you can have an infinity of quadratic beziers that pass through any three points... also they aren't regular quadratics at all... a cartesian quadratic is something completely different and is always parabolic.<br />
      <br />
      I did cover quartic splines that pass through points at uni... but it was almost 2 years ago now and I can't be arsed to work it all out right now just for you. I'll work it out when i get some spare time or something cos its starting to bug me :) .</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br /></p>

      <p class="post-time small text-muted">16th March 2004 17:59 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Some things to google for:<br />
      - b-splines<br />
      - nurbs<br />
      - catmull-rom<br />
      ...</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
  <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js"></script>
  <script type="text/javascript" src="../js/scripts.js"></script>
</body>
</html>
