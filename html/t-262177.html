<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Rigid body physics..."><title>Rigid body physics... - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"></noscript> <script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-137.html">AVS Presets</a></li><li class="active">Rigid body physics...</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=262177">Rigid body physics...</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">21st December 2006 00:38 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Rigid body physics...</strong><br>I made this preset recently to test the practicality of making a physicsy preset... it seems to work fine except for a couple of strange bugs.<br><br>1.) After the cube settles a mysterious "wobbling" starts to happen. Despite how it may appear this doesn't come from the collision (like the usual wobbling in most game physics) but from my integrator. I've tried adding dampening to no avail. If I remove the constraints the problem doesn't disappear either. I have a hunch that it is to do with rounding errors somehow but can't work it out.<br><br>2.) It doesnt draw anything when TomyLobo tries to watch it.<br><br>I get the feeling that I will be able to resolve the wobble by either fixing my integrator, or abandoning it and replacing it... but 2 is just weird since there is no dependency on external files or the like..<br><br>If you want to change the starting velocity and spin of the cube I added some variables to apply different velocities to two opposite vertices on the first frame. In the first superscope you can modify these lines to change them:<br><br>svx = 2; svy = 0; svz = ivz; // velocity for the first vertex so that it can spin<br>tvx = -2; tvy = 1; tvz = ivz; // velocity for the second vertex so that it can tumble<br><br>It is possible to roll the cube along the ground by making sure that the velocities don't balance in x and z.<br><br>If anyone is interested this physics model can be quite easily extended to any triangular model with a little preprocessing to determine some constraints. Its just a shame that there is an instability for the moment...<br><br>If anyone can shed any light on the bugs it would be most appreciated. :)<br><br>Please excuse the ugliness of the cube, it doesn't even backface cull!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">21st December 2006 10:27 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I stayed up quite late working on this last night... I managed to remove the instability from the integrator, it is now stable if I remove the constraints, I also added some different friction for the ground and some simple deformability/elasticity for the cube. It is still unstable but might be okay with a little work, or when applied to a situation where nothing comes to rest (imagine the cube rolling down a 45-degree incline).<br><br>Anyway, I was going to post it up this morning but I forgot to update the file on my ftp with the latest version. I also forgot that I can't access ftp at work.<br><br>I would post the link but I don't particularly want people browsing the unsecure root of my ftp...<br><br>Anyway, I am disappointed that there has been no feedback yet... being the first new technical thing in AVS for quite a while and all.<br><br>Now... to make a hypercube with physics... and project it onto a 3-sphere...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">21st December 2006 17:18 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">here it is. i changed the starting conditions so it looks cooler too... :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">S-uper_T-oast</span><br></p><p class="post-time small text-muted">22nd December 2006 00:24 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><i>Originally posted by jheriko</i><br><b>Now... to make a hypercube with physics... and project it onto a 3-sphere...</b></blockquote>&lt;droool&gt;<br><br>I'll check out the preset latter tonight.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">22nd December 2006 00:55 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Now it is so very nearly stable, you have to wait a good few seconds for it to flip out. This is good enough for a preset in several ways now. As long as the cube keeps moving there is no instability. I might make a version tomorrow with a cube rolling down a slope.. but now its getting quite late here.<br><br>Enjoy.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">JaVS_v2.5</span><br></p><p class="post-time small text-muted">23rd December 2006 03:36 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">wOw, pretty cool!</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Nanakiwurkz</span><br></p><p class="post-time small text-muted">23rd December 2006 20:11 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Here you go</strong><br>I looked into the code and found what was causing the warping.<br><br>I've tested the preset like 100 times and waited without closing avs window and the cube remains stable for about 1-5 mins. i'll let you take it from there.<br>also as you know i'm not very Inclined in math so please show some mercy if the correction is not what you wanted.<br>Chow.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">23rd December 2006 21:28 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">you broke the framerate independence.. and added some random shit. (t=sin(oldt))<br><br>effectively you broke my timer which means that it uses a constant time step, which makes my integration much more stable.<br><br>thanks but no thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">hornet777</span><br></p><p class="post-time small text-muted">24th December 2006 03:21 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>2.) It doesnt draw anything when TomyLobo tries to watch it.</blockquote>Wow jheriko, you were trying to impress us with the 'physics' part of the preset, but this selective ignore of forum members has the be the real star of your preset, not to mention where you <i>hid</i> that code!<br><br>Seriously though, would it help to perhaps change the 'physical' perspective from one of mechanics to maybe one of electronics? An integrator is after an analogue computer, and in its most basic form, a capacitor. Would this make the maths easier and/or more compreshensible/discernable? Most likely a dead end, but throwing it in for grins.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">26th December 2006 19:01 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">srsly... i really outdid myself by making not work for only one person :p<br><br>the integrator is a bit flaky, but its fast. i might gut it and replace it with rk4, but it is stable enough for a preset for now. at worst i can at least turn it off should an object come to rest, and turn it on again when it has to move again... before it was so unstable that the cube never became slow enough to allow me to effectively cut off the small values.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">MaTTFURY</span><br></p><p class="post-time small text-muted">27th December 2006 02:42 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Cube_1 doesnt work for me as you already know :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">28th December 2006 12:49 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I forgot actually. So its two people then.<br><br>Its still quite amazing. I've never had this kind of 'selective functionality' from avs presets before.. it boggles the mind how it can happen. The only reasonable explanation i can think of is that you have a different triangle/avstrans APE to mine.<br><br>This preset uses no components or code tricks that haven't already been used. All the physics stuff is just AVStrans code working in the megabuf.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script><script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script><script type="text/javascript" src="../js/scripts.js" defer></script></body></html>