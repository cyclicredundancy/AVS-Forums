<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Wondering if this exists:"><title>Wondering if this exists: - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"></noscript> <script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-137.html">AVS Presets</a></li><li class="active">Wondering if this exists:</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=270533">Wondering if this exists:</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">benn</span><br></p><p class="post-time small text-muted">3rd May 2007 01:24 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Wondering if this exists:</strong><br>Hey everyone...lurker here. :-D<br><br>I've been programming software that generates ambient music for a couple years, and I was thinking about making an installation with it.<br><br>Basically, I'm looking for an AVS preset (or even tips) that would simply fade the screen to a color from a black screen when it hears a certain peak level of sound.<br><br>I've been searching for something that could do this easily for a long time, and AVS seems like my best option. Funny how something so basic can be so hard to find!<br><br>Any help would be greatly appreciated!<br><br>-b</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mr_Nudge</span><br></p><p class="post-time small text-muted">3rd May 2007 02:06 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Re: Wondering if this exists:</strong><br></p><blockquote><i>Originally posted by benn</i><br><b><br>Basically, I'm looking for an AVS preset (or even tips) that would simply fade the screen to a color from a black screen when it hears a certain peak level of sound.<br></b><hr></blockquote></div><hr>it sounds easy enough, but you'll need to be more specific. what does it do after the colour fades in? what colour do you want and at what volume will trigger it?<br><div class="post"><p class="post-meta"><span class="post-author text-primary">benn</span><br></p><p class="post-time small text-muted">3rd May 2007 02:25 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">thanks for the reply!<br>white would be fine...this should be easily changable i'm sure. i have a bit of noob avs knowledge to sort that out.<br><br>the volume of the audio would trigger the brightness, however, i can't seem to work one out that "fades in and out". i could get it to fade out...but it just flashes in. no "fade in" effect. :)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mr_Nudge</span><br></p><p class="post-time small text-muted">4th May 2007 02:03 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i get what you want i get it now. i'll have a shot when i get home.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Mr_Nudge</span><br></p><p class="post-time small text-muted">4th May 2007 14:11 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">okay the preset's too small for me to bother zipping and posting so here's the code.<br><br>superscope with the code<br></p><pre>
<code><br>init//<br><br>n=1<br><br>frame//<br><br>col1=getspec(0.16,0.27,0);<br>col1=col1*0.9;<br>col=col*0.9+sin(col1)*0.25<br><br>point//<br><br>x=0;<br>y=0;<br>red=col;<br>blue=red;<br>green=red;<br></code>
</pre><br>
      <br>
      followed by a movement trans with the code<br>
      x=0;<br>
      y=0;<br>
      (rect-coords on)<br>
      <br>
      hope thats what you're after
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">PAK-9</span><br></p>

      <p class="post-time small text-muted">4th May 2007 14:37 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">protips(tm):<br>
      <br>
      There are three tasks in your question:<br>
      <br>
      - Detect if the music is above a certain volume (which is what you mean by 'peak level of sound')<br>
      - Interpolate from one colour to another<br>
      - Fill the screen with that colour<br>
      <br>
      To detect the volume of the music at any particular time it is easiest to take the DC component of the frequency<br>
      <br>
      spectrum, you can do this using getspec(0,0,0) which will take the zero'th bin of the FFT with a width of zero on<br>
      <br>
      the centre (average of left and right) channel. To test it is above a value you can use above(getspec(0,0,0),&lt;value&gt;), so for example to set the value of register 0 to 1 when the music goes above a normalised 'volume' of 0.9 you can use reg00=if(above(getspec(0,0,0),&lt;value&gt;),1,reg00); note that this will set it to 1 and leave it at 1. You can be more clever when detecting volume by taking a rolling average or using a more sophisticated algorithm but this way is simple and effective. Rather than just switching from 0 to 1 you would probably want a register to smoothly transition from 0 to 1, to do this you can have a second variable which tends towards the value of the other variable over time.<br>
      <br>
      Interpolating from one colour to another is a simple case of linear interpolation:<br>
      pal1r=128/255; //define your pallete<br>
      pal1g=255/255;<br>
      pal1b=0/255;<br>
      pal2r=0/255;<br>
      pal2g=128/255;<br>
      pal2b=255/255;<br>
      <br>
      red=pal1r+(pal2r-pal1r)*lvl; //interpolate (lvl is a value from 0-1)<br>
      green=pal1g+(pal2g-pal1g)*lvl;<br>
      blue=pal1b+(pal2b-pal1b)*lvl;<br>
      <br>
      Filling the screen with this colour is easiest achieved with a superscope and movement. You render a dot of the desired colour in the centre of the screen and use a movement to set ever other pixel equal to that colour. So create a superscope with n=0, x=0, y=0 and red/green/blue equal to your desired colour. Place a movement after it with the user code 'd=0', this means for every pixel, make the pixel colour equal to the pixel at d=0 in radial coordinates (i.e. the very centre of the screen)<br>
      <br>
      Put that all together and you're done</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">zhadoomzx</span><br></p>

      <p class="post-time small text-muted">4th May 2007 19:56 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">@pak-9, just a little correction:<br>
      Quote:</p>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">benn</span><br></p>

        <p class="post-time small text-muted">5th May 2007 02:07 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">works lovely! thanks so much for your help. now if only there was a stable way to render it to AVI....but that'll be another battle. :-D</p>
      </div>
      <hr>

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">zhadoomzx</span><br></p>

        <p class="post-time small text-muted">5th May 2007 02:22 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Why not just use fraps? :up:</p>
      </div>
      <hr>

      <div class="footer">
        <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
      </div>

      <table cellpadding="6" cellspacing="0" border="0" width="100%">
        <tr>
          <td class="alt2">
            <hr>
            So create a superscope with n=0, x=0, y=0 and red/green/blue equal to your desired colour. I think n has to be at least 1 (well exactly 1 in this case :) ) or nothing will be rendered.<br>
            <br>
            greets, zha
          </td>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script>
  <script type="text/javascript" src="../js/scripts.js" defer></script></tr></table></div></div></body></html>