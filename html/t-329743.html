<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="AVS fails to work [Trying to fix with v2.91 TEST #1]"><title>AVS fails to work [Trying to fix with v2.91 TEST #1] - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-139.html">AVS Troubleshooting</a></li><li class="active">AVS fails to work [Trying to fix with v2.91 TEST #1]</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=329743">AVS fails to work [Trying to fix with v2.91 TEST #1]</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">earwigsrazor</span><br></p><p class="post-time small text-muted">17th April 2011 12:45 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>AVS fails to work [Trying to fix with v2.91 TEST #1]</strong><br>Hi all<br><br>Am trying to use AVS and it fails to work at all. Using windows 7 and latest version of winamp.<br><br>All other visualisations work (milkdrop,geiss etc) yet when I try to use AVS I get a screen that is either very light cyan or a faun colour and no visualisations at all.<br><br>Anyone know if there is a fix for this or is this because of the operating system I am using?<br><br>thanks</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">17th April 2011 20:09 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">There have been a few reported issues already concerning compatibility with newer Winamp versions and newer Windows versions.<br>AVS 2.81d was made in late 2006 and was but a small upgrade of 2.81b, which was made in late 2003/early 2004, about when Winamp 5 was introduced. The sourcecode is very fragile and although it is open sourced today, nobody has been able (yet) to make serious improvement. In a way, it's surprising that there haven't been any issues earlier.<br><br>One of the suggestions that have been posted, is to disable Aero when you're running Winamp.<br>Right-click winamp.exe and go to properties. Go to the compatibility tab and check 'Disable desktop composition' or something alike.<br><br>You could read some relevant threads on these forums, and try to mess around yourself. If you get it to work, and also if you don't, please keep us informed of your progress. Others who are reading this benefit from it as well.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">earwigsrazor</span><br></p><p class="post-time small text-muted">17th April 2011 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">thanks will check this and report back asap.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">earwigsrazor</span><br></p><p class="post-time small text-muted">17th April 2011 20:38 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">ok have tried this and have also tried using windows xp compatability mode and it starts to crash winamp :(</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br></p><p class="post-time small text-muted">21st April 2011 13:19 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">winamp 5.6 works best with avs 2.9, but avs 2.9 isn't working as good as 2.81d (and previous incarnations). so you need to downgrade winamp to version <a href="http://www.oldapps.com/winamp.php?old_winamp=253" target="_blank">5.5</a> and use it with avs <a href="http://avs.visbot.net/" target="_blank">2.81</a> for full compatibility. it stinks, but that's the way you have to go.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Menschenfleisch</span><br></p><p class="post-time small text-muted">15th May 2011 20:19 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I have this problem too, but with Windows XP.<br><br>I actually liked in the past the Unconed - Speeder3k.<br><br>This one actually is nice to watch, because its not just some random eye stuff, it is something like a track you drive. This is much better.<br><br>At milkdrop I didnt find such a visualization so far.<br><br>But unfortunately avs doesnt run for me. Same problem here.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Cordwainer</span><br></p><p class="post-time small text-muted">21st May 2011 02:06 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">You're a genius. I recently upgraded to Windows 7 from XP and then upgraded to the latest version of Winamp (561) and AVS didn't work. I tried various suggestions on other threads (such as lowering the resolution) but they didn't work. Finally I found this thread, uninstalled 561, and then installed 558. Now AVS works!<br><br>Winamp shouldn't release an upgrade if it doesn't work with AVS IMO. Or they should unbundle AVS. It's such an important part of Winamp for me that if AVS doesn't work, I don't want to upgrade.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">23rd May 2011 08:49 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">AVS was reverted to the version everyone kept saying was the one that works which now seems to have been a load of fud from the complainers and hence causes the <u>few</u> Vista / Win7 AVS users immediare crashes again *grr*<br><br>AVS should just be split from the distro and provided separately - and i was shot down for that suggestion even though it's the only way when there's no developement resources to work on a dead plug-in which no one can get working compile (especially since most of the issue is coming from the ape's used by the presets which no one has code for).<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br></p><p class="post-time small text-muted">23rd May 2011 13:30 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i hate to admit it, but i agree that splitting avs from winamp would be the best solution (this will be the end of avs, but still it makes more sense than shipping a broken product!) so i was wondering under what terms the dll can be distributed. (i'm not sure if the same conditions as for the source apply)</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">21st December 2012 22:55 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">so since it's all screwed up with all of the versions floating about, the following is going to happen and then i need input on what will happen after that...<br><br><br>rather than just shipping 2.81d and it not working on Vista and higher, we're going to include 2.82 in the installer and install 2.82 on Vista and higher (as it's DEP friendlier and less prone to crashing - ignoring the preset display issues, etc) and install 2.81d on XP and before (where that version seems to behave better).<br><br>that is to alleviate the posts about it just not working (something is better than nothing).<br><br><br>---------------------------------------------------------------------------<br><br>and so for the future, i now have a local build of chavs 2.9 which i've been flipping through presets to get it to crash and then trying to fix those crashes there and then (i'm doing this all on Win7 x64 so the fact it runs at all is welcome).<br><br>after re-reading everything, is it even worth me trying to sort out a 2.91 based on chavs (which sadly is based on the 2.81b source code) or just put this to bed and forget about it ? i'm willing to put in the time (if only to get it to a point were we don't get crash reports about it continually) but is this something that will help (and yes i know people don't care much now) ?<br><br><br>from what i can see, the main things that aren't right with the chavs base are:</p><ul><li><s><font color="green">still randomly crashes (have seen it and fixed 2 issues so far)</font></s></li><li><s><font color="green">issues with rand(..) as per <a href="http://web.archive.org/web/*/forums.winamp.com/showpost.php?p=2687627&amp;postcount=6" target="_blank">http://forums.winamp.com/showpost.ph...27&amp;postcount=6</a></font></s></li><li>people don't like the ui / want it changed to one of the typically used mods (if so which one ?)</li><li><s><font color="green">version resource is messed up</font></s></li><li>not doing presets correctly compared to 2.8x ? (not sure what can be done about that)<br><b>main example is "convolution.ape" which is incompatible with Vista an up - blocking loading of it for the time being so it gives a UI indicator in the preset editor instead of bombing out, etc</b></li><li>fullscreen mode won't hold without using compatibility mode</li><li>overlay mode just shows a solid colour instead of the preset</li><li>anything else??</li></ul><br><b>[edit]</b><br>as issues are deemed 'resolved' i'll strike them through, as well as adding anything new (assuming anyone cares and reports anything).<br><br>-daz</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">QOAL</span><br></p><p class="post-time small text-muted">22nd December 2012 21:28 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">In case anyone is looking for the chavs source:<br></p><blockquote><a href="http://1014.org/shiz/code/chavs.zip" target="_blank">http://1014.org/shiz/code/chavs.zip</a> -- git clone WDL from <a href="http://cockos.com/wdl" target="_blank">http://cockos.com/wdl</a> too, it has the latest EEL (which chavs needs).</blockquote>From: <a href="https://twitter.com/JustinFrankel/status/201502381790334976" target="_blank">https://twitter.com/JustinFrankel/st...02381790334976</a><br><br><br><br><br>The convolution filter doesn't work in chavs (but I guess that falls under "not doing presets correctly"?)<br><br>A unified working version of AVS that works nicely with modern OSes and Winamp versions can't be a bad thing.<br>I'm a fan of the improvements chavs brings, and as it seems that Justin hasn't worked on chavs since his initial chavs post, fixing the bugs in it may get a couple more people to try out the improved syntax.<br><br><br>But whatever happens, presets that use the GVM APE will still cause crashes. (I assume)</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">23rd December 2012 17:30 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i'd really need examples or something specific to know what to look at / attempt to fix as i've no idea what the expected behaviour of the convolution filter or what uses the gvm ape to target testing / fixes for it.<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">23rd December 2012 23:02 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">First off, thank you very much for still wanting to fix this beast. I mean it.<br><br>The convolution filter is like a custom blur filter. It works per pixel and can copy that pixel to (or remove from) the surrounding pixels.<br><br>The GVM is a variable manager. I added example presets for both effects. The GVM has a help window if you hit the [?] in the bottom right of the window. I remember that Jheriko lost the sourcecode for it, but I'm confident he'll help you if you have specific questions.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">23rd December 2012 23:20 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">well from what i've seen (haven't tried with the examples) is GVM only crashed when there was a preset transition due to an issue in HeapFree(..) (so some form of memory freeing issue which could be just down to AVS built with a different compiler and abi differences).<br><br>i've still to try it out but some extra exception handling in AVS during that phase should help resolve the crash issue.<br><br><br><br>my main thing from friday night and a few hours today) has been looking into not being able to use AVS in full-screen or overlay modes and if anything, it's looking like trying to move over to use Direct3D instead of DirectDraw to be able to do what's needed (seeing as the DirectDraw interface has been legacy since Vista).<br><br>alas i need to read up on that as it's not a simple change from what i've taken in so far (and i could probably do something with re-using Milkdrop's code but that's one heck of a beast to combine into AVS when i don't think most of it's functionality is needed (i.e. just need enough to get the generated frames onto the screen - i believe a Direct3D Surface may be what's needed since we've using DirectDraw Surfaces already).<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">23rd December 2012 23:44 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">ok, just tried the GVM example from above and with 2.82 (2.81d or 2.83 won't run for me on my dev machine) and i get a reasonably consistent crash when transitioning away from the preset.<br><br>using my build with some extra exception handling on where the crash appears to be triggered, the GVM error still happens but AVS keeps going (i just get the odd 'beep' due to how i'm testing for it when forcing it to go through all of the presets quickly).<br><br><br>and just had a look at the other ones and #3 shows the issue the best i think (moving blob which should have blurred edges - when comparing 2.82 vs 2.81d on XP) .<br><br><b>[edit]</b><br>so the convolution filter comes from <b>convolution.ape</b> i assume?<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">24th December 2012 01:01 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><small>Originally posted by DrO</small><br><b>[edit]</b><br>so the convolution filter comes from <b>convolution.ape</b> i assume?</blockquote>Personally, I've never been too confident on that issue. There's one built-in and a separate .ape which originates (I think) from before when it was integrated with AVS.<br>Same goes for the video delay ape and some other ape's. (I'm on my laptop and it's 2 am now so I can't check which ones exactly). I get duplicates in my list and adding 'the wrong one' crashes AVS.<br><br>I personally try to just not install the extra ones, but maybe someone else has a better idea. I'm just a user, and really not a programmer who'd know about how things work internally.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">24th December 2012 01:33 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i've had a bit of a look and it's a crash in that ape though the crash location doesn't give me anything useful to work against - it doesn't show as an actual crash unless you 'Disable SEH for effects' on the debug window. though when i try on XP it works ok, which makes me wonder if it's something with the memory handling which is causing the issue.<br><br>so will have a bit more of a look tonight as i wouldn't be surprised if it's something simple causing it (like most of the AVS crash issues, heh). otherwise won't be tinkering with it until late next week (or this week as it now seems to be based on the time).<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">27th December 2012 10:35 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i spent more time than i should have trying to figure out the convolver crash and it just seems like that ape really doesn't like newer versions of Windows as i've made sure that the sent data to it is the same between the different versions (only thing might be due to how DirectDraw surfaces are handled between XP and Win7 but i cannot tell anything from the limited crash details i get).<br><br>so other than trying to find source code (doubtful) or decompiling it to work out what's going on (painful), i'm not sure what can be done other than looking for a replacement / writing one myself (that'll be fun, not).<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">29th December 2012 01:25 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">i think i'm just going to have to put in a block on loading convolution.ape on non-XP installs as i just cannot work out what on earth it's doing which makes it fail on Windows 7 and not XP (unlike <a href="http://forums.shoutcast.com/showpost.php?p=2803460&amp;postcount=8" target="_blank">http://forums.shoutcast.com/showpost...60&amp;postcount=8</a> implied which is not the case from my testing with my build on the different OSes).<br><br>not an ideal solution but it at least means it's possible to indicate the issue visually without causing things to crash, etc until a solution can be created (as this has to be an issue with that ape specifically on newer OSes as i'd have to expect it not to work on XP if it was specifically due to the AVS version).<br><br>and i've updated my post higher up with the status of the 'issues' i'd listed so that some are now classed as done. really the killer seems to be the whole fullscreen/overlay modes being borked now as i've not had a crash in a while (ignoring when i'm allowing convolution.ape to crash). might even consider uploading a test version in the coming week or two...<br><br>-daz</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br></p><p class="post-time small text-muted">29th December 2012 18:57 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I posted a journal on my dA page hoping for more replies.<br>I think that most could live without a working overlay mode.<br><br>If only things were better commented.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">QOAL</span><br></p><p class="post-time small text-muted">29th December 2012 21:04 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Thank you very much for spending your time on this DrO. (I hope it hasn't been too much of a chore to get to this point)<br>News of the crash fixes alone is very welcome.<br><br>I'm surprised Yathosho (or even people from #avs) haven't voiced their opinion on this yet though.<br><br><font size="1">I know it's a long shot (considering the source code for many apes has been lost), but is it worth trying to contact the convolution.ape author? <a href="http://web.archive.org/web/*/forums.winamp.com/member.php?u=51178" target="_blank">This is their forum account.</a></font></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">3rd January 2013 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><center><b><u>v2.91 TEST #1</u></b></center><br><br>To install, <a href="http://web.archive.org/web/*/forums.winamp.com/attachment.php?attachmentid=50137&amp;d=1357227129" target="_blank">download the attachment</a> and extract <b>vis_avs.dll</b> into your <b>Winamp\Plugins</b> folder (if you prefer you can rename it to something else before installing or rename the existing vis_avs.dll).<br><br><b>Note:</b> <i>This depends on MSVCR90.DLL so needs to be used with a recent version of Winamp (i can hear the complaints about that already) but this is how all of the official plug-ins are done.</i><br><br><br>This is my test build (obviously the fullscreen stuff is still borked like all of the other versions on Vista and up) and is the CHAVS 2.9 code combined with the 2.81d changes and then my 'fixes' (so is back to 2.81b as a base with updates and anything i changed in 2.82/2.83 is not part of this).<br><br>This should fix the random GVM related crash (we're catching the error instead of failing)<br>Other crash fixes as i've come across in my tinkerings<br>Version resource is correct for this version<br>rand() seems to work as expected now (could do with confirmation)<br>Indicates the current preset in the right-click menu<br><br><br>If there are issues, will need to know the specific preset (attached to the thread if needed) and any useful information. Otherwise it's basically fullscreen mode that's the main breakage but that's more down to using DirectDraw instead of Direct3D for the overlays etc.<br><br>-daz</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">QOAL</span><br></p><p class="post-time small text-muted">3rd January 2013 18:11 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I've found a crash with <a href="http://synth-c.deviantart.com/art/Lift-Off-24825136" target="_blank">Synth-C's Lift Off pack</a>. Inverse Eruption is the first preset in the pack that seems to trigger it when navigating away.<br><br>I suppose it's worth asking about the Dynamic Movement too.<br>I came across many presets that render incorrectly which seems to be down the DM.<br>An example could be the intro preset for <a href="http://acko.net/files/avs/FinalWhack.exe" target="_blank">Unconed's Final Whack</a>.<br><br>Edit: Thanks again for your work</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">DrO</span><br></p><p class="post-time small text-muted">3rd January 2013 19:10 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">can reproduce a crash with the 'Inverse Eruption' preset though it's not liking it when i run it under the debugger so will need to find out why it's struggling to deal with the exception.<br><br>just tried the intro preset from the second one and that's a hell of a difference in output between this one and 2.81d (yet all i've ever seen is complaints but never anything to show what is going wrong). have attached a screenshot of 2.81d (left) and my 2.91 (right).<br><br>will investigate further on both as time allows in the coming days.<br><br>-daz</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script><script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script><script type="text/javascript" src="../js/scripts.js" defer></script></body></html>