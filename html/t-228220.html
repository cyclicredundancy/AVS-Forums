<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Help with minor code issue" />

  <title>Help with minor code issue - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <div class="row">
        <div class="dropdown pull-right">
          <button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            Change style
            <span class="caret"></span>
          </button>
          <ul id="css-select" class="dropdown-menu" role="menu">
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Default</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation" class="dropdown-header">Bootswatch</li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/amelia/bootstrap.min.css">Amelia</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cerulean/bootstrap.min.css">Cerulean</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cosmo/bootstrap.min.css">Cosmo</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cyborg/bootstrap.min.css">Cyborg</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/flatly/bootstrap.min.css">Flatly</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/journal/bootstrap.min.css">Journal</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Readable</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/simplex/bootstrap.min.css">Simplex</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/slate/bootstrap.min.css">Slate</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/spacelab/bootstrap.min.css">Spacelab</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/united/bootstrap.min.css">United</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/yeti/bootstrap.min.css">Yeti</a></li>
          </ul>
        </div>
    </div>

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">Help with minor code issue</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=228220">Help with minor code issue</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sonic Ether</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 06:06 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>Help with minor code issue</strong><br />
      Ok, I'm getting the whole DM thing down. Now, I can create decent DMs. But I do have one question. What would be a basic way to smooth movement? Because I've got alot of jerky presets and I would like to know if there is a way to smooth the movement. Can anyone help me?:D</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">^..^</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 11:44 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">There are many ways to make movements smoother. Let me suggest you two quite simple ways. Just try which one fits best to the kind of movement you use. (The beat code is just 'random' code i used in these examples and you can replace it with any kind of music-reaction you want).<br />
      <br /></p>
      <pre>
<code><font size="3">frame:<br />t=t*0.95+tb;<br />---------------------<br />beat:<br />tb=(rand(100)+1)*0.005</font></code>
</pre><br />
      or this one:<br />
      <pre>
<code><font size="3">frame:<br />t=t+tb;<br />tb=tb*0.95;<br />---------------------<br />beat:<br />tb=(rand(100)+1)*0.005</font></code>
</pre><br />
      <br />
      Also it might be interesting for you to have a look into some AVS-tutorials and help-documents listed in this <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?s=&amp;threadid=209060" target="_blank">thread</a>.<br />
      <br />
      btw: Please post such questions in the <a href="http://web.archive.org/web/*/forums.winamp.com/forumdisplay.php?s=&amp;forumid=139" target="_blank">AVS Troublshooting</a> subforum to help keeping the forum tidy. ;)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hboy</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 16:40 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">you say that you can do decent DMs and then ask about smooth movements? wow.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">^..^</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 16:50 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Maybe to him "decent dm" means something else than to us! Perhaps every dm that is more complicated than the example ones are decent to him? But im just guessing... :igor:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">StevenRoy</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 20:57 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>Smooooth motion, the StevenRoy way</strong><br />
      Here's the way I do it:<br />
      <br />
      Suppose I had a variable "dx", which I want to set to a random value between -1 and 1 on each beat. The simplest way to do that, of course, is to put this in the Beat code:</p>
      <pre>
<code>dx=(rand(201)-100)*.01</code>
</pre>Now that's all well and good, but it does have that jerkiness problem. My favourite way to smooth out the motion is quite similar to what ^..^ described:
      <pre>
<code>Frame:<br />dx=dx*.9 + tdx*.1<br /><br />Beat:<br />tdx=(rand(201)-100)*.01</code>
</pre>This causes dx to slide towards tdx (I use the extra t to mean "target"), at a rate proportional to their difference. In other words, it starts out quickly and slows down as it nears its target. To adjust the speed of this transition, you can change the .9 and .1 coefficients to other values, such as .95 and .05, or even .99 and .01 to make it nice and slow. (These coefficient pairs should add up to 1; it's not necessary, but it makes it easier to know what you're getting.)<br />
      <br />
      In most cases, this is pretty good... but every time tdx changes, dx starts homing towards it, and it's a sudden, jerky start. Surprisingly, the way to fix this start is simply to repeat the process; add another target variable and make that the target of our first target variable.<br />
      <br />
      It ends up looking something like this:
      <pre>
<code>Frame:<br />dx=dx*.9 + tdx*.1;<br />tdx=tdx*.95 + ttdx*.05;<br /><br />Beat:<br />ttdx=(rand(201)-100)*.01</code>
</pre>Voila. Smooth motion. (Notice that I gave the tdx-&gt;ttdx motion different values to slow it down a little.)<br />
      <br />
      Now, if you're <b>really</b> anal about code optimization, you may notice that ttdx is being multiplied my the same value once per frame, even though it doesn't change. This multiplication can be moved to the onbeat code for a very, very slight performance boost. (Most of the time, I don't bother.) The same goes for the tdx multiplication, for a similar reason. You can end up with code that looks like this:
      <pre>
<code>Frame:<br />dx=dx*.9 + tdx;<br />tdx=tdx*.95 + ttdx;<br /><br />Beat:<br />ttdx=(rand(201)-100)*.00005</code>
</pre>It's not uncommon for me to use code like this several times in a single Dynamic Movement.<br />
      <br />
      Of course, it usually takes more than smooth motion to make a good AVS preset, but it usually helps.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br /></p>

      <p class="post-time small text-muted">12th October 2005 22:15 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Sonic Ether: Perhaps you could give us an example preset of what you exactly mean by decent DM's, and perhaps a better explanation of 'smooth movement', before everybody is getting all exited over perhaps the wrong thing.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">hboy</span><br /></p>

      <p class="post-time small text-muted">13th October 2005 19:04 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">yup. by the way, my first dm was a smooth little x=x+0.05. yeah.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Sonic Ether</span><br /></p>

      <p class="post-time small text-muted">3rd November 2005 05:52 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Haha, sorry for the late reply, I've been buisy lately. Ok, I'll send you an example, but I want it to be smooth... so check it out. I KNOW IT'S MESSY, I'M NOT PERFECT! Haha, I'm not so anal about clean code :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Mr_Nudge</span><br /></p>

      <p class="post-time small text-muted">5th November 2005 11:06 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">i haven't seen the preset..basically because my laptop can't run avs. but smooth movement can be made the way everyone so far has told you..so i might as well give you my version<br />
      <br />
      frame-----<br />
      a=a*0.9+a1*1.1<br />
      beat------<br />
      a1=rand(100)*0.0001<br />
      <br />
      that way 'a' will change values between 1 &amp; -1 smoothly and won't stop instantly..it'll kind of 'slide' for a while and then stop slowly</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">DummyDDD</span><br /></p>

      <p class="post-time small text-muted">9th November 2005 20:59 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I think that the movement looks pretty smooth (and the preset look pretty nice too :)), what you may think of as jerky movement may be caused by a low fps (or worse yet changeing fps), or by the "dark edges".<br />
      <br />
      What i mean by dark edges is just the 4 spectrums at each side of the screen, which are transformed across the screen.<br />
      To prevent thoose edges you should reduce the edges by reducing the zooming of the movement. You also could add a virtual effect\AddBorders outside of the effect list (I know it's a crappy solution, but it's used quite often).<br />
      <br />
      If you want to boost the fps of the preset you can set the first convolution filters scaling to 32 (because n^2 scalings are faster, 1, 2, 4, 8, 16...), this will affect the luminance some. You can also integrate the movement into the first dynamic movement, this will affect the luminance even more.<br />
      <br />
      I've attached an altered version of the preset which should have less jerky movement.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
  <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js"></script>
  <script type="text/javascript" src="../js/scripts.js"></script>
</body>
</html>
