<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Troubles with config strings (APE)" />

  <title>Troubles with config strings (APE) - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <div class="row">
        <div class="dropdown pull-right">
          <button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            Change style
            <span class="caret"></span>
          </button>
          <ul id="css-select" class="dropdown-menu" role="menu">
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation" class="dropdown-header">Bootswatch</li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/amelia/bootstrap.min.css">Amelia</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cerulean/bootstrap.min.css">Cerulean</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cosmo/bootstrap.min.css">Cosmo</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cyborg/bootstrap.min.css">Cyborg</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/flatly/bootstrap.min.css">Flatly</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/journal/bootstrap.min.css">Journal</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Readable</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/simplex/bootstrap.min.css">Simplex</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/slate/bootstrap.min.css">Slate</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/spacelab/bootstrap.min.css">Spacelab</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/united/bootstrap.min.css">United</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/yeti/bootstrap.min.css">Yeti</a></li>
          </ul>
        </div>
    </div>

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">Troubles with config strings (APE)</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=107683">Troubles with config strings (APE)</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br /></p>

      <p class="post-time small text-muted">30th September 2002 11:24 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>Troubles with config strings (APE)</strong><br />
      I still have troubles saving strings in the config data and loading them.<br />
      <br />
      WHEN are the 2 routine:<br />
      <br />
      virtual void load_config(unsigned char *data, int len);<br />
      virtual int save_config(unsigned char *data);<br />
      <br />
      called from AVS?<br />
      <br />
      When a control is modified?<br />
      Do I have to call them?<br />
      Can I call them inside an APE?<br />
      <br />
      Thx<br />
      Camillo</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">cfp</span><br /></p>

      <p class="post-time small text-muted">30th September 2002 18:35 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">whenever the ape is loaded (e.g. when someone loads an avs) the load_config one is called. it is also called say when you open the avs window after having closed while watching an avs containing your ape. basically it's called when you expect it to be...<br />
      <br />
      save_config is called when someone either saves an avs or closes the avs window. again basically whenever it needs to be.<br />
      <br />
      i don't think they're called every time a control is modified, this would seem like overkill, but it would be easy for you to check if it's really important just stick a MessageBox in the save routine.<br />
      <br />
      you can also call them yourself, but you would only want to do this if you were giving your ape save and load buttons in which case you would pass the pointer to the block of data to be written/read from the file.<br />
      <br />
      i've e-mailed you already with details of how to save strings.<br />
      <br />
      tom</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br /></p>

      <p class="post-time small text-muted">1st October 2002 13:49 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I think only when a preset is saved and/or AVS is closed (and the current preset is saved).<br />
      <br />
      I have any problems with saving/loading data, and in my latest APE I'm writing quite a lot (the colormapper). I hope you're not using the APE SDK's method of saving data though (i.e. byte per byte). I just use a struct 'apeconfig' which I write and read like this:<br />
      <br />
      load:<br />
      memcpy(&amp;this-&gt;config, data, sizeof(apeconfig));<br />
      <br />
      save:<br />
      memcpy(data, &amp;this-&gt;config, sizeof(apeconfig));<br />
      return sizeof(apeconfig);<br />
      <br />
      You can even define multiple config structs later for backwards compatibility.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">camillo</span><br /></p>

      <p class="post-time small text-muted">1st October 2002 14:48 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>using structs</strong><br />
      BUT if you use a struct for in and out, you MUST set a max number of characters for string values.<br />
      <br />
      Camillo</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br /></p>

      <p class="post-time small text-muted">5th October 2002 02:11 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Or use a struct for the fixed data and tack the strings on later. Like<br />
      <br />
      int stringlen = len - sizeof(apeconfig);<br />
      <br />
      I use this in my colormapper... I store 8 colormaps that can each have a variable length without a problem.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
  <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js"></script>
  <script type="text/javascript" src="../js/scripts.js"></script>
</body>
</html>
