<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Blending Question" />

  <title>Blending Question - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body style="display:none">
  <div class="container">
    <div class="row">
        <div class="dropdown pull-right">
          <button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">
            Change style
            <span class="caret"></span>
          </button>
          <ul id="css-select" class="dropdown-menu" role="menu">
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation" class="dropdown-header">Bootswatch</li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/amelia/bootstrap.min.css">Amelia</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cerulean/bootstrap.min.css">Cerulean</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cosmo/bootstrap.min.css">Cosmo</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/cyborg/bootstrap.min.css">Cyborg</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/flatly/bootstrap.min.css">Flatly</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/journal/bootstrap.min.css">Journal</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/readable/bootstrap.min.css">Readable</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/simplex/bootstrap.min.css">Simplex</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/slate/bootstrap.min.css">Slate</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/spacelab/bootstrap.min.css">Spacelab</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/united/bootstrap.min.css">United</a></li>
            <li><a href="#" rel="//netdna.bootstrapcdn.com/bootswatch/3.0.2/yeti/bootstrap.min.css">Yeti</a></li>
          </ul>
        </div>
    </div>

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">Blending Question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=231027">Blending Question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 01:00 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>Blending Question</strong><br />
      I have a question that's been bugging me for a while (not unlike most of my questions). When a render mode, say, XOR, does its math, like exclusive or in XOR's case, what is it comparing? Better put, does it compare the colors of two pixels, or the brightness, or some other more transient quality? i.e. Maximum blending, does it display the brighter image, more colorful, etc.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eheiney</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 01:14 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">TomyLobo's Buffer blend APE explains it a bit, if this is what you're looking for. It shows:<br />
      <br />
      a=b (Replace)<br />
      a=a+b (Additive)<br />
      a=max(a,b) (Maximum)<br />
      a=(a+b)/2 (50/50)<br />
      a=a-b (Subtractive 1)<br />
      a=b-a (Subtractive 2)<br />
      a=a*b/256 (Multiply)<br />
      a=a*x+b*(1-x) (Adjustable)<br />
      a=a xor b (XOR)<br />
      a=min(a,b) (Minimum)<br />
      a=|a-b| (Absolute difference)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 01:28 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Ok, but I still don't get, for example, max <i>what</i>. If you put two frames together, what determines what aspects and colors stay and what don't. What about say, the first frame, makes it greater, in max for example, than the second one?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">eheiney</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 01:50 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Well in the case of the max, it returns the greatest of a and b. I don't really understand it myself, I just know what will happen if I select a particular blending or rendering mode.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 01:54 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">:weird: :weird: :weird: Huh??? :weird: :weird: :weird:<br />
      <br />
      Can someone help me, scratch that, us???</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">StevenRoy</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 02:14 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">In the case of an Effect List, the output mode affects how the EL's data is placed upon the pixels that are already there. The "Set Render Mode" works the same way: Superscopes or Texer IIs use the current render mode to determine how the line or image is added to the previous image.<br />
      <br />
      Also, all of this math is done with the individual red, green, and blue components of each pixel.<br />
      <br />
      For example:<br />
      Replace: The pixel of the previous image is simply overwritten by the new pixel.<br />
      Additive: Each component (red, green, and blue) of the new pixel is added to the same component of the previous pixel.<br />
      Maximum: Each component (r, g, and b) of the previous pixel is increased (if necessary) to match the same component of the new pixel.<br />
      <br />
      And so on.<br />
      <br />
      "New pixel" means whatever image is created by the Effect List, Superscope, Texer, et cetera. The "previous pixel" is simply what was there before. In the equations such as "a=a+b", the "a" represents the previous pixel and the "b" is the new pixel.<br />
      <br />
      The resulting image then becomes the new "previous pixel" of whatever operation comes next.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 21:10 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Ah. So its execute 3 times per pixel, for blue, green, and red?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jheriko</span><br /></p>

      <p class="post-time small text-muted">15th November 2005 23:24 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by JFASI</i><br />
        <b>Ah. So its execute 3 times per pixel, for blue, green, and red?</b>
      </blockquote>Essentially correct, but under the hood all the blending uses MMX so that the red green and blue are operated on in parallel.<br />
      <br />
      Also all the colors are always capped to 0..1 (0..255) after the blend is done.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

      <p class="post-time small text-muted">16th November 2005 02:03 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Quote:</p>
      <hr />
      I'm confused. MMX??? and capped to 0..1??? I don't get it.

      <table cellpadding="6" cellspacing="0" border="0" width="100%">
        <tr>
          <td class="alt2">
            <hr />
            <i>Originally posted by jheriko</i><br />
            <b>Essentially correct, but under the hood all the blending uses MMX so that the red green and blue are operated on in parallel.<br />
            <br />
            Also all the colors are always capped to 0..1 (0..255) after the blend is done.</b>
            <hr />
          </td>
        </tr>
      </table><br />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

        <p class="post-time small text-muted">16th November 2005 02:09 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">I think MMX just has to do with the processor performing specific operations for sound and video. As far as capping between 0 and 1, that's just done to keep values correct. Having a value outside of that range means nothing to AVS in terms of colors so it's just more convenient to cap it inbetween. Both of these topics are behind the scenes stuff anyways so as long as you're aware that colors range from 0 to 1, you're set unless you really want to know the abstract details.<br />
        <br />
        I'm curious as to exactly how/what buffer blend does. And I think I'm slightly confused as to the what two frames the input blending uses for effects lists. Anyone?</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

        <p class="post-time small text-muted">16th November 2005 02:14 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Aha, so 0..1 equals (1..255)/255. Cool. i'll let the MMX go.</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

        <p class="post-time small text-muted">16th November 2005 02:20 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Uhh yeah or you could go with straight 0 to 1 and skip the conversion completely. That would be faster in code, but yes scaling 0 to 255 would work.</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">Grandchild</span><br /></p>

        <p class="post-time small text-muted">16th November 2005 12:43 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">in the Color Modifier it's <b>sometimes</b> better to have a value ranging [0...255] divided by 255, especially when you have "equal()" expressions. for example an expression like "red = equal(red,0.5)" will always return zero, since no color value will ever be exactly 0.5 [rather 127/255 or 128/255].</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

        <p class="post-time small text-muted">16th November 2005 22:44 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Ok, so the strength of a color could be 0-255? (Realizes 256 color depth) Oooh... so doing like n=1000 on a massive colormorphing scope is completely pointless. Aha.</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">gordmoo</span><br /></p>

        <p class="post-time small text-muted">19th November 2005 20:09 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">it depends on how many colours you have in the scope. you arn't limited to 255 colours, more like 2 to the power of 24... 16,777,216 colours then. unless of course your running in 16-bit colour mode in that case its 2 to the power of 16...<br />
        <br />
        and just to make things a lil' clearer. mmx is just a fancy thing that works in the back of your processor to speed things up some, it can be ignored ;)</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">JFASI</span><br /></p>

        <p class="post-time small text-muted">19th November 2005 20:34 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Hmm... that's a lot of colors. Now how to program them all...</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

        <p class="post-time small text-muted">21st November 2005 18:44 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Ok I'm gonna ask this again cause I think my question go overlooked, but what exactly does input blending and buffer blending do?</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">StevenRoy</span><br /></p>

        <p class="post-time small text-muted">21st November 2005 19:29 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">In Effect Lists, you mean? Input blending is pretty much the same as the output blending, but it affects the image at the very beginning of the Effect List.<br />
        <br />
        For example:<br />
        Ignore: The Effect List starts with whatever data it had before. (Unless you have "Clear every frame" enabled.)<br />
        Replace: The current image data (before the Effect List) is copied into the Effect List.<br />
        Additive: The current data is added to the Effect List's data.<br />
        ...And so on. The important thing to remember is that each Effect List maintains its own image data, much like a separate preset. Just as the output blend option controls how (and if) the Effect List's data modifies the data that comes after it, the input blend option controls how the Effect List is modified (at the beginning) by the data that comes before it.<br />
        <br />
        The "Buffer #" blending modes are rather unique, in that they use the data of one of the "Buffer Save" buffers as a kind of "Alpha map". It's similar to "Adjustable", except the amount of blending is controlled for each pixel by the brightness of the pixels in the selected buffer.<br />
        <br />
        Put another way:<br />
        Foreach pixel { Outputdata = (Effectlistdata * Buffer) + (Previousdata * 1-Buffer) }<br />
        Where "Buffer" is the red, green, or blue component of each pixel (whichever is greatest).<br />
        <br />
        It's really a pretty cool feature, although using it too much can slow a preset down quite a bit.<br />
        <br />
        It took me some experimenting to figure this out, by the way. If you're still confused, try some experiments of your own. After a while, it may start to make sense.</p>
      </div>
      <hr />

      <div class="post">
        <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

        <p class="post-time small text-muted">23rd November 2005 17:55 <abbr title="Coordinated Universal Time">UTC</abbr></p>

        <p class="post-content">Ahh thank you! I knew this stuff at one point, but couldn't figure it out after not doing anything with AVS for a while. Thanks again StevenRoy!</p>
      </div>
      <hr />

      <div class="footer">
        <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
      </div>
    </div><!-- Put JavaScript here -->
  <script type="text/javascript" src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js"></script>
  <script type="text/javascript" src="../js/scripts.js"></script>
  </div>
</body>
</html>
