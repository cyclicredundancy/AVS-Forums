<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to create cubic room DM"><title>How to create cubic room DM - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-85.html">AVS</a></li><li class="active">How to create cubic room DM</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=342337">How to create cubic room DM</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">patipano</span><br></p><p class="post-time small text-muted">17th February 2012 13:35 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>How to create cubic room DM</strong><br>Please show me or explain the code of box-like(room) dynamic movement. I cant understand such a code :cry:<br><br>Example Presets:<br>Tuggummi - Let me out!<br>UnConeD - Cubic Flower</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">patipano</span><br></p><p class="post-time small text-muted">19th February 2012 15:33 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Example Code (UnConeD - Watercolorcube):<br></p><pre>
<code><br>Init:<br>t=rand(100);rx=1.57;ry=1.57;rx=0;ry=0;pt=0;bt=0<br><br>Frame:<br>sd=sd*.9+getspec(0,.1,0)*.1;<br>sd2=sd2*.9+getspec(0,.05,0)*.1;<br>t=t+0.19+sd*.75;pt=pt+.25+sd2*.5;<br>ox=sin(pt*.1231);oy=sin(pt*.1);oz=cos(pt*.0913);<br>ol=-bt*.5+3/sqrt(sqr(ox)+sqr(oy)+sqr(oz));<br>ox=ox*ol;oy=oy*ol;oz=oz*ol;<br>rxo=sin(t*.0373)*cos(t*0.0563)*sin(cos(t*.0631))*.5;<br>ryo=sin(t*.0511)*cos(t*0.071)*sin(cos(t*.0415))*.5;<br>ry=-atan2(ox,oz)+ryo;<br>rx=-atan2(oy,sqrt(sqr(ox)+sqr(oz)))+rxo;<br>rz=sin(t*.053)*cos(t*.117)*sin(cos(t*.0651));<br>cx=cos(rx);sx=sin(rx);cy=cos(ry);sy=sin(ry);cz=cos(rz);sz=sin(rz);<br>bt=bt*.9;af=h/w<br><br>Beat:<br>pt=pt+55*max(0,getspec(0,.1,0)*3-1.5);<br>bt=1<br><br>Pixel:<br>y=y*af;<br>dx1=x*cz-y*sz;<br>dy1=x*sz+y*cz;<br>dy2=dy1*cx-1.2*sx;<br>dz2=dy1*sx+1.2*cx;<br>dx3=dx1*cy-dz2*sy;<br>dz3=dx1*sy+dz2*cy;<br>k1=((oz-sign(dz3))/dz3);<br>k1=if(below(k1,0),-1000,k1);<br>k2=((oy-sign(dy2))/dy2);<br>k2=if(below(k2,0),-1000,k2);<br>k3=((ox-sign(dx3))/dx3);<br>k3=if(below(k3,0),-1000,k3);<br>k=max(max(k1,k2),k3);<br>ix=-ox+dx3*k;iy=-oy+dy2*k;iz=-oz+dz3*k;<br>alpha=bnot(equal(k,-100));<br>x=if(equal(k,k3),iy,ix)*.9;<br>y=if(equal(k,k1),iy,iz)*.9;<br>d=max(abs(x),abs(y));<br>alpha=if(bor(above(k,10),below(k,0)),0,1.8-sqr(d+.5)+.2);<br></code>
</pre><br>
      This is a box-like(or Cube Surface) code
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p>

      <p class="post-time small text-muted">15th April 2012 22:30 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">this code performs a raytrace - with some hacks - to achieve its effect. the idea is to get the equation of a line, from a direction and start position, and intersect it with the equations of planes describing the cube to find the texture coordinates we want on the cube's surface.<br>
      <br>
      ox,oy,oz are a camera position<br>
      <br>
      y=y*af is aspect ratio correction<br>
      <br>
      the big block of code involving sx, cx, sy... are rotations<br>
      <br>
      the k = lines are solving the raytrace and picking the correct solution<br>
      <br>
      x and y are then set based on the results. these are texture coordinates. alpha provides the fading to hide ugly edges.<br>
      <br>
      if you try and recreate this approach from scratch without copying code you should get a good understanding of the technique and be able to apply it to arbitrary situations...<br>
      <br>
      AVS code like this is not easy to pick apart or follow, the coding style we all used to use, the lack of comments and the obscurity of the problems all pile up to make it very difficult.</p>
    </div>
    <hr>

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">patipano</span><br></p>

      <p class="post-time small text-muted">18th July 2012 06:24 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Could you show me a general equation of k?<br>
      Does it (ray tracing) involving with calculus? (Partial Derivative, Integral, Tangent plane, etc)</p>
    </div>
    <hr>

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script>
  <script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script>
  <script type="text/javascript" src="../js/scripts.js" defer></script></body></html>