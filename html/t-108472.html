<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="New APE plugin"><title>New APE plugin - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script><script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]--></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-85.html">AVS</a></li><li class="active">New APE plugin</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=108472">New APE plugin</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">5th October 2002 16:04 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>New APE plugin</strong><br>HI!<br>I made my first APE plugin for Winamp3.<br>You can find it here:<br><br><a href="http://web.archive.org/web/*/www.winamp.com/components/detail.jhtml?componentId=122157" target="_blank">http://www.winamp.com/components/det...onentId=122157</a><br><br>Can you tell me what do you think about it?<br>If you are an AVS coder, do you think it could be useful?<br><br>I need some positive answers to go on and make it better and better.<br><br>Thanx<br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">5th October 2002 17:05 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">That would be useful for feeding DMs but it is completely unreactive to the sound, which kind of puts me off of ever using it.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Xion(810)</span><br></p><p class="post-time small text-muted">5th October 2002 17:42 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I kinda like it, and I am experimenting with it myself...</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">5th October 2002 19:02 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I don't like it at all.<br><br>1) The interface... this is the 100% stereotypical programmer interface: let the user enter numbers in an obscure format and disallow any immediate visual feedback. Instead, why not use sliders for the individual constants, or even just different editboxes. Also note that the words 'int' and 'float' are meaningless to non-programmers. What do the constants mean by the way? Your instructions tell the user what to do, but not how to do something.<br><br>2) Why do you need to push that button to see the result? Why not recalculate whenever the constants change?<br><br>3) The name. It's a render effect so it should be in the render section, not in the main one.<br><br>4) Resolution dependence. The APE uses a fixed coordinate system rather than adapting itself to the window size.<br><br>5) Aliasing artifacts. The colors don't blend smoothly, there are sudden jumps. This causes apparent horizontal and vertical lines to appear. I assume this is because you calculate a fixed color ramp between the two colors once, which is not detailed enough.<br><br>6) Speed. The APE causes a huge FPS hit. Maybe you need to optimize it some more?<br><br>Sorry if I sound too critical, but AVS is a really great piece of software because all its components are powerful and well thought out. I've written some APEs as well, so I know what I'm talking about.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Xion(810)</span><br></p><p class="post-time small text-muted">5th October 2002 22:06 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Coned, what kind of crap computer are you using? I made a preset with it and it's running smooth at 26fps...:weird:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">6th October 2002 02:16 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Thank you for calling my computer crap for no particular reason.<br><br>I didn't say it ran at 5 fps or something, but I find that the performance hit is too high for this simple render effect. Even my metaballs run faster here, and they do a 30x30x30 marching cubes + rasterisation of the resulting mesh.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">6th October 2002 04:36 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>Thank you for calling my computer crap for no particular reason.</blockquote>It is so rare for sarcasm to be pulled off so flawlessly in text.<br><br>Maybe I'm just stupid but that cracked me up. That is a devastating quip.<br><br>:blah::blah::blah::blah::blah:<br>5/5 Laughing Smileys (all of them me)<br><br>Well thats my random post for this week...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">7th October 2002 11:10 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>1) The interface... this is the 100% stereotypical programmer interface: let the user enter numbers in an obscure format and disallow any immediate visual feedback. Instead, why not use sliders for the individual constants, or even just different editboxes. Also note that the words 'int' and 'float' are meaningless to non-programmers. What do the constants mean by the way? Your instructions tell the user what to do, but not how to do something.</blockquote>[Camillo] That is the only type of interface which could store a variable number of parameters<br><br><br><blockquote>2) Why do you need to push that button to see the result? Why not recalculate whenever the constants change?</blockquote>[Camillo] I didnt try to do something different... maybe in next releases<br><br><br><blockquote>3) The name. It's a render effect so it should be in the render section, not in the main one.<hr></blockquote></div><hr>[Camillo] The reviewer put it in that section; I know it is wrong<br><br><br>Quote:<table cellpadding="6" cellspacing="0" border="0" width="100%"><tr><td class="alt2"><hr>4) Resolution dependence. The APE uses a fixed coordinate system rather than adapting itself to the window size. [Camillo] It is wrong; every time you resize the window it recalculates parameters. In fact if the window is smaller, the speed is higher.<br><br><br><blockquote>5) Aliasing artifacts. The colors don't blend smoothly, there are sudden jumps. This causes apparent horizontal and vertical lines to appear. I assume this is because you calculate a fixed color ramp between the two colors once, which is not detailed enough.</blockquote>[Camillo] Maybe in the first version; there was a bug at 256 pixels; but the new versione does not have jumps in the palette. Maybe the reviewer uploaded the wrong version.<br><br><br><blockquote>6) Speed. The APE causes a huge FPS hit. Maybe you need to optimize it some more?</blockquote>[Camillo] FPS depends on the dimensions of the AVS window; it has not asm code in it, but I think I am going to improve it.<br><br><br>If you have any ideas on how to improve it and how to insert some activity to the sound.<br><br>Thanx<br>Camillo</td></tr></table><br><div class="post"><p class="post-meta"><span class="post-author text-primary">Yathosho</span><br></p><p class="post-time small text-muted">7th October 2002 11:27 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><i>Originally posted by camillo</i><br><b>[Camillo] The reviewer put it in that section; I know it is wrong</b></blockquote>unconed was referring to the section in the avs editor</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">7th October 2002 12:18 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>section</strong><br></p><blockquote>unconed was referring to the section in the avs editor</blockquote>Whoops... you're right...<br>It is my first plugin... I need these advices by more expert coders than me.<br><br>Thanx<br>Camillo</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">7th October 2002 13:27 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">To place an APE in a submenu, just name it "Submenu / Name". AVS will split it up at the slash.<br><br>And as far as the jumps in palette are concerned, they're definitely there. I'm a kind of 'pixelspotter' though (I can easily see details in pictures, compression artifacts et al. that others don't). It's not very noticable. Check the image to see what I mean below. I put the image through a blur filter, which has causes a much smoother result to appear. Compare the areas indicated by the arrow (the images are zoomed 200%; I blurred before zooming of course), you'll see the left one has jumps in the color.<br><br><a href="http://acko.net/dump/renderplasma.png" target="_blank">http://acko.net/dump/renderplasma.png</a><br><br>Oh and I wouldn't submit APEs to Winamp.com until they have an APE section. People will think it's a regular plug-in. Chances are they won't get it to work (I get tons of mails of people who download my presets and don't even get them to work), and if they do, they'll complain it's not varied enough.<br><br>As for the interface issue, you say "it's the only one that allows a variable number of inputs". Not so. You created this interface from the idea 'the user needs to input a variable number of coefficients representing different layers'. This is bad. The good idea is: 'the user needs to setup a variable amount of layers, each with its own coefficients'. Here's a different proposal:<br><br><a href="http://acko.net/dump/renderplasma2.png" target="_blank">http://acko.net/dump/renderplasma2.png</a></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">7th October 2002 14:06 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>yep</strong><br>About the blurfilter... I tried it averaging with the next 6 pixels in a row, but it is TOO slow...<br>Maybe I am doing wrong with the ape architecture...<br>How do you code apes?<br>My ape sweeps all pixels of the avs window and renders it on the fly.<br>Then it sweeps everything again with the blur.<br>Should I soften during render?<br>Should I use double buffering? Having smaller buffer in memory and stretching it on to screen? Or whats the right mode? My code is very smooth and optimized... I really don't know how to improve it without going to asm.<br><br>I really dont know why Winamp site is so negligible with apes.<br>There's no download section and no forum section.<br>I think they want to push scripting and skinning.<br>Did you asked for that?<br><br>Good idea for the interface.<br>But I will concentrate on the interface after optimizing my effect.<br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">7th October 2002 14:24 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">I wouldn't use a blur filter if I were you. I think the problem is that you're calculating the color gradient in advance, but that it's not detailed enough.<br>Or maybe there are rounding errors that cause the numbers to jump a bit?<br><br>And actually the only way to speed up your code is indeed to use ASM. Almost all my APEs these days have hand-optimized assembly in the render section, simply because it's so much faster. Especially if you use MMX: you can blend and add 32-bit pixels with minimal effort, like this:<br><br>movq mm0, pixel1;<br>movq mm1, pixel2;<br>paddusb mm0, mm1;<br>movq pixel1, mm0;<br><br>This will take the 32-bit 'pixel1' and 'pixel2', will add them together channel by channel and will clip the value at 0xFF.<br><br>In C/C++, this would be something like:<br><br>min(0xFF, (pixel1 &amp; 0xFF) + (pixel2 &amp; 0xFF)) | min(0xFF00, (pixel1 &amp; 0xFF00) + (pixel2 &amp; 0xFF00)) | min(0xFF0000, (pixel1 &amp; 0xFF0000) + (pixel2 &amp; 0xFF0000))<br><br>I don't need to tell you that the first is just a tad faster ;). And in fact, most color-related things are actually a lot easier in MMX/ASM than in C++. You'll be happy you switched ;).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">8th October 2002 09:42 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>cool</strong><br>But why the minus? Shouldnt be there an average value?<br>Like:<br><br>((pixel1 &amp; 0xFF) + (pixel2 &amp; 0xFF))/2 | ((pixel1 &amp; 0xFF00) + (pixel2 &amp; 0xFF00))/2 | ((pixel1 &amp; 0xFF0000) + (pixel2 &amp; 0xFF0000))/2<br><br>I cant find any reference about MMX assembler instructions.<br>It seems to me that Intel blown them away or is secretely hiding them in its archives.<br><br>Could you please tell me an active link to some mmx instruction list?<br>Also the site <a href="http://www.mmx.com" target="_blank">www.mmx.com</a> seems to be gone.<br><br>Maybe if you have some files about mmx, could you please email them to me?<br><br>Thanx<br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">camillo</span><br></p><p class="post-time small text-muted">8th October 2002 11:11 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>mmx!!!</strong><br>ok i found something here about MMX:<br><br><a href="http://www.intel.com/design/intarch/techinfo/pentium/mmxprog.htm#1466" target="_blank">http://www.intel.com/design/intarch/...xprog.htm#1466</a><br><br>Camillo</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">8th October 2002 11:57 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Your code does a 50/50 blend, mind does an additive operation.<br><br>Actually I thought Intel had a pretty nice MMX page, showing how to use it for color operations. I don't have the URL anymore though and their site is hard to find anything on.<br></p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Karnov</span><br></p><p class="post-time small text-muted">8th October 2002 13:34 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Quote:</p><hr>god damn, hes like superman<br>:p<table cellpadding="6" cellspacing="0" border="0" width="100%"><tr><td class="alt2"><hr>And as far as the jumps in palette are concerned, they're definitely there. I'm a kind of 'pixelspotter' though (I can easily see details in pictures, compression artifacts et al. that others don't). It's not very noticable.<hr></td></tr></table><br><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">9th October 2002 01:47 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">There is a series of three pdf format documents available on intel.com called 'IA-32 Intel Architechture Software Developer's Manual' that you might find useful, do a search for this on <a href="http://www.intel.com" target="_blank">www.intel.com</a> and you'll find them. They contain detailed information on all of the x87 FPU and MMX instructions as well as loads of others which are for the newer processors. There is a simple list of all of the opcodes for the varying sets in chapter 5 of the first document which you will probably find pretty useful. The rest of it is all very thorough descriptions, explainations and technical specifications.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script type="text/javascript" src="../js/jquery.cookie.min.js"></script><script type="text/javascript" src="../js/scripts.js"></script></div></body></html>