<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Solution for beat detection"><title>Solution for beat detection - AVS Forums</title><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-53539506-7','auto');ga('send','pageview');</script><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" as="style" onload="this.rel='stylesheet'"> <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css"></noscript> <script>!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);</script></head><body style="display:none"><div class="container"><div class="row"><div class="dropdown pull-right"><button class="btn btn-link btn-sm dropdown-toggle" type="button" data-toggle="dropdown">Change style <span class="caret"></span></button><ul id="css-select" class="dropdown-menu" role="menu"><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">Default</a></li><li role="presentation" class="divider"></li><li role="presentation" class="dropdown-header">Bootswatch</li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/amelia/bootstrap.min.css">Amelia</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css">Cerulean</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css">Cosmo</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cyborg/bootstrap.min.css">Cyborg</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css">Flatly</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css">Journal</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css">Readable</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css">Simplex</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/slate/bootstrap.min.css">Slate</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css">Spacelab</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css">United</a></li><li><a href="#" rel="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css">Yeti</a></li></ul></div></div><ol class="breadcrumb"><li><a href="../index.html" class="glyphicon glyphicon-home"></a></li><li><a href="f-138.html">AVS Wishlist</a></li><li class="active">Solution for beat detection</li></ol><p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=110932">Solution for beat detection</a></p><br><div class="post"><p class="post-meta"><span class="post-author text-primary">oddity</span><br></p><p class="post-time small text-muted">22nd October 2002 11:54 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Solution for beat detection</strong><br>I posted this in another forum too, so excuse the repetition.<br><br>I have read many posts about AVS beat detection being pretty worthless.. Instead of (or to supplement) complex beat detection algorithms, it would be really nice to be able to tap a key or a mouse button to the beat, and AVS would get the BPM from that. It seems like a simple enough solution. Can it be created easily through the SDK? Does something like this already exist? Please let me know...<br>Thanks.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">22nd October 2002 13:03 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">1) You *almost* got it to the right forum (err or subforum :weird: ) This should be in the wishlist section i think.<br><br>2) Although it sounds simple im pretty sure it wouldn't be possible or a wise thing to do. For starters would you be tapping the example: Space Bar all the time? Or save some bpm's as "presets" for different songs? What about if you have 2000 songs? hell even over 50 songs is too much to manually set the bpm. And besides how the hell are you going to be able to make AVS presets if you are all the time tapping the what-ever-button. :blah:<br><br>AVS beat detection isn't so good, but it does it's job and sometimes i don't even notice that it doesn't follow the song so well...<br><br>You can always try to "fix" it by creating your own "beat detection code" by using something like:<br><br>ob=if(above(getspec(0,0,0),0.5),1,0) ;<br>t=t+ts ; ts=if(equal(ob,1),rand(300)/1000-0.15,ts)<br><br>But this method doesn't work so good either, because different songs are... well different :p<br><br><br>Personally im pretty happy with the beat detecion winamp/avs offers, because it seems to work with the music i listen.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">22nd October 2002 13:19 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">After getting over a severe laughing fit, here is what I have to say.<br><br>Reasons why its a bad idea:<br></p><ul><li>It requires the user to do something awkward.</li><li>It would probably slow down AVS.</li><li>Beats in tracks change, not all tracks have a constant beat all the way through.</li><li>The current beat detection is more than adequate for our needs.</li><li>It would most likely need a fair amount of the avs base code to be changed.</li><li>You would look like a fool having to do that.</li><li>An AVS preset doesn't need to rely on the beat detection.</li></ul><br>Reasons why its a good idea:<ul><li>...</li></ul><br>Let me get back to you on that... I'm sure I can think of one good reason if I give it enough time</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oddity</span><br></p><p class="post-time small text-muted">22nd October 2002 13:22 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Of course it would be a bad idea for a completely automated system; however, if I am VJing for some event, I tend to be manually controlling AVS, so I am at the keyboard anyway. I didn't mean that you'd need to tap a key for _every_ beat... maybe just the first 5 beats, and then the bpm can be calculated from timing the key presses.<br><br>So if you are using live audio input, you'd just have to tap a key a couple times whenever the beat/song changes to sync up the visuals. Really doesn't seem like much work to me, considering you'd have perfect beat synchronization.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">22nd October 2002 13:28 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>maybe just the first 5 beats, and then the bpm can be calculated from timing the key presses.</blockquote>And the Custom BPM that avs features doesn't do this because...?</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">22nd October 2002 13:32 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><i>Originally posted by Tuggummi</i><br><b><br>And the Custom BPM that avs features doesn't do this because...?</b></blockquote>Ouch. Thats sharper than a page of Oscar Wilde rolled up neatly into a cone, dipped into a small cup of lemon juice and then promptly stabbed into the eye.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oddity</span><br></p><p class="post-time small text-muted">22nd October 2002 13:45 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>And the Custom BPM that avs features doesn't do this because...?</blockquote>Because it wouldn't work for live input, which is primarily what I use AVS with.<br><br>All I am saying is that key taps could be used to _supplement_ the current beat detection code - to give it a hint when it hasn't figured it out, or to nudge it into the correct BPM when it loses the beat. That way, human intervention is only required when you want to be precise with your visual sync, otherwise it will operate automatically like usual.<br><br>I don't know why you feel the need to be caustic towards an idea. Maybe you think it's worthless, but I can see a definite advantage in having such a function available.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">22nd October 2002 14:09 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Well Custom BPM works even without music... why shouldn't it work with live situations? :confused: :weird:<br><br>Ok i think im going to just wait until UnConeD replies to this post to see what is "right" :rolleyes:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">oddity</span><br></p><p class="post-time small text-muted">22nd October 2002 14:20 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote>Well Custom BPM works even without music... why shouldn't it work with live situations?</blockquote>A custom BPM will "work" with live input, but a fixed value will not be able to adapt to changing BPM of the live input, and therefore the visuals will not be synced to the beat, which is sorta my point in using it.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">22nd October 2002 15:31 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Just adjust the presets to match the certain song and only play the preset with that song? hmm ok so in a live situation that would be a little too complicated i guess... i have to admit, although i don't know anything about playing avs live it sounds hella complicated...<br><br>But putting that kind of feature in avs when it serves only vj's... i don't think it's a good idea, but maybe someone (if possible) could do you an APE that works like that, then just apply the ape to every preset you are going to play.<br><br>But im against the idea that avs should support that by standard. Just read Jheriko's post why :D</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">22nd October 2002 16:00 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Good idea because:<br>- It doesn't remove anything, it's just an extra feature<br>- AVS' advanced beat-detection is based on prediction of beat samples. Adding a beat 'tap' allows for more accurate information when needed, without having to do much extra coding. For example, if the user starts tapping, it disables the built-in detection for a few seconds, otherwise it would get double-beats when it *is* correct (i.e. the tapped beat, and the detected beat).<br><br>I don't see why you people are against it :)<br><br>However, it cannot be made as an APE, because APEs cannot change AVS values (e.g. render mode, bpm, etc)<br><br>Custom BPM is a workaround, but it has to be included in every preset. I'd much rather have a global option for this.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">22nd October 2002 16:12 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Ok what ever you say UnConeD...<br><br></p><blockquote>This preset doesn't work if you don't tap the beat detection XX times before viewing this!!!!11!!!1!11!!</blockquote>Just a thought...</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">jheriko</span><br></p><p class="post-time small text-muted">22nd October 2002 16:49 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"></p><blockquote><i>Originally posted by Tuggummi</i><br><b>Just read Jheriko's post why :D</b></blockquote>Don't assume that I actually know anything. About 95% of my AVS knowledge is interpolated.<br><br>EDIT: Oddity: I was just in a 'caustic' mood earlier :p. I still think its a bit pointless, a much better solution would be to make the AVS beat detection better, I think its fine the way it is though.</div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crazycomputers</span><br></p><p class="post-time small text-muted">22nd October 2002 18:56 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Well...</strong><br>I honestly don't know what the deal is. It's a feature request... is there something wrong with that?<br><br>I have wished for manual beat detection for a long time. It doesn't sound like a bad idea. I plan to use AVS for live concerts (as soon as I get a projector ;) ) and this would be a very useful feature.<br><br>However, the spacebar wouldn't work because it's mapped to selecting a random preset.<br><br>Oh, and this would have to be implemented in AVS for Winamp2. I don't like Winamp3... it is so much slower, AVS and all.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nixa</span><br></p><p class="post-time small text-muted">22nd October 2002 19:19 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">This sounds like a good idea to me. I would only be against such an option if it would slow down avs when not used or it took nore than one hour to code(there are many more importand whishes).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br></p><p class="post-time small text-muted">22nd October 2002 20:20 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">One other thing: The computer wouldn't know that the actual beat is <i>between</i> frames. So when you tap in the beat it will be slightly off, and over a short period of time the beat detection will be extremely off. Basically it's multiplying irrational numbers while using low decimal precision.<br><br>Besides that, the user is much less perfect at hitting the key at the exact time of the beat than the computer would be, despite how imperfect the computer might be at registering the beat in the first place. IF the song has a good beat (which is what you'd be playing at dances anyway), AVS's advanced beat detection works almost perfectly.<br><br>So a better question would be: "How can I get live input for AVS?" which I believe is answered in the FAQ</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">22nd October 2002 23:33 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">The thing is, you can't use advanced beat-detection for live dj'ing, because AVS will never re-adapt the beat. It'll think it's just one huge song playing.<br><br>A hotkey to readapt the beat would do miracles too.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">23rd October 2002 08:33 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">If you use Advanced Beat detection and then you use some kind of a track mixer plugin (or the crossfade, lol) Wouldn't it work then? Why does it have to be one big song if the problem is that it is one big song...<br><br>Any of this make any sense? :p<br><br>Mix the track<br>Cut the track in pieces<br>Use Crossfade to smoothly change between tracks<br>Use Advanced Beat Detection: everytime a track changes it readapts the beat.<br><br>In all my common sense i don't see a reason why this shouldn't work.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">23rd October 2002 12:26 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Yeah, but I think we're talking about live performances here.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">23rd October 2002 12:36 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">hmm... uhm...<br><br>*rubs his head and thinks it all over again*<br><br><br><br>oh... So in live performances it "records" it to a one huge track eeh? which is played at the same time? like in internet radio or something... So that's why :rolleyes:<br><br>I really don't know too much about this stuff :p<br>There should be a "stupid me" icon like in devart :D<br><br>/me hits himself with a hammer in the head<br>:stupidme:</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">UnConeD</span><br></p><p class="post-time small text-muted">23rd October 2002 21:54 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">The problem is that AVS only re-adapts the beat when the song's title changes. However when you're streaming from linein://, the title stays the same, so it thinks it's one huge song. It doesn't really 'record', I simply used that term to describe it reading the data from your sound card's input and using that as vis-data.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">nixa</span><br></p><p class="post-time small text-muted">24th October 2002 21:52 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">And you could reset the advanced beat detection(reset button).</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">crazycomputers</span><br></p><p class="post-time small text-muted">24th October 2002 22:25 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content"><strong>Maybe I should rephrase that</strong><br>Actually, I do <b>NOT</b> want AVS to calculate the beat for me. Since it would be live work, I wouldn't have anything else to do, so I'd like to be able to tap the beat in and have AVS rely on my input exclusively.<br><br>Basically, AVS wouldn't try to find the beat; it would <i>only</i> turn on the beat flag if the button is down, if you get my drift.<br><br>I don't see how this could slow AVS down, either. The other hotkeys don't seem to affect the speed.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Jaheckelsafar</span><br></p><p class="post-time small text-muted">25th October 2002 05:28 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">If AVS isn't detectinc a beat it should speed up. It wouldn't have to do the math to detect a beat.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">dirkdeftly</span><br></p><p class="post-time small text-muted">25th October 2002 06:32 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">Actually, no. AVS doesn't really have to do that much math do detect a beat. I doubt it is much more than this (ignore the dots, they're for indentation):<br><br>if(averageVolume&lt;=beatVolume)<br>{<br>.for(int i=0,i&lt;=6,i++)<br>.{<br>..beatTime[i]=beatTime[i+1];<br>.}<br>.beatTime[7]=currentTime;<br>.bps=beatTime[7]-beatTime[0];<br>}<br><br>You have no idea how fast that calculates. And that's crappy n00b code. Imagine MMX enhanced addition of two numbers :p<br>Even if you're talking about the on-beat code being excecuted, it's still fast as a mofo. I seriously doubt it affects AVS's performance.</p></div><hr><div class="post"><p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br></p><p class="post-time small text-muted">25th October 2002 08:12 <abbr title="Coordinated Universal Time">UTC</abbr></p><p class="post-content">The question is: Does the average user want to tap the key for beat detection?<br><br>My answer is no and that's my opinion.<br><br>I have said enough.</p></div><hr><div class="footer"><p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p></div></div><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" defer></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" defer></script><script type="text/javascript" src="../js/jquery.cookie.min.js" defer></script><script type="text/javascript" src="../js/scripts.js" defer></script></body></html>