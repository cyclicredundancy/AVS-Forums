<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content=" Code trouble AVS" />

	<title> Code trouble - AVS Forums</title>

	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
		<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->
</head>
<body>
	<div class="container">
	<!-- Put navigation bar here -->






	<ol class="breadcrumb">
		<li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>
		<li><a href="f-139.html">AVS Troubleshooting</a></li>
		<li class="active">Code trouble</li>
	</ol>
	<p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=108716">Code trouble</a></p>


<br />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">7th October 2002 01:24 GMT</span>
		</p>
		<p class="post-content">
		
			<strong>Code trouble</strong><br />
		
		
			
		

		I've made a sort of animation where 9 points move around the screen by waiting for their current movement to finish, then waiting for a beat then commencing their next movement. I've attached the preset because it is kind of hard to explain. Anyway, my problem is that I want the points not to wait for the next beat but to wait 4 beats before they shuffle around again, I've tried coding this in varying ways but each time I have completely failed. The nearest I got is also attached, it seems to work fine for a while then seemingly at random the points suddenly jump to their next positions rather than smoothly moving to them. Once again it is sort of hard to describe so please look at the preset.<br />
<br />
This problem has been bugging me all day now so I thought that maybe one of you could spot what I've done wrong. The code is all fairly simple so I've most likely made a tiny error somewhere and I just can't spot it. I can't see why the random jumping occurs at all.<br />
<br />
In the presets I've used the convolution filter to make the points more visible, if you don't have it don't worry, it's not vitally important to it in anyway.<br />
<br />
Thanks in advance.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Rovastar</span><br />
			<span class="date small text-muted">7th October 2002 12:44 GMT</span>
		</p>
		<p class="post-content">
		
		

		Ummh I am confused as why if you want it to move every 4 beats you also want the code to finished processing. I can understand for every beat but why for 4 beats? Surly this wil just slow things down and the veiwer will not notice any difference.<br />
<br />
Or am I missunderstanding totally here?<br />
<br />
I presume that every 4 beat you want all the dots to move?<br />
<br />
I think that the 'waiting for the code to finsh' bit is confusing is processing then you do the counting. Maybe dunno..<br />
<br />
MAke it simple first. Use 1 dot instead of 9. I picked dot 2.<br />
<br />
ANd make the number of steps 2 instead of 8 and add them slowly.<br />
<br />
I will see if I can get any more for you.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Rovastar</span><br />
			<span class="date small text-muted">7th October 2002 13:45 GMT</span>
		</p>
		<p class="post-content">
		
		
			
		

		OK looked into the beat stuff and getting the counter is easy.<br />
<br />
I made a very simple counter by<br />
<br />
init<br />
bc=0; (that's Beat Counter)<br />
mo=0; (that's MOvement)<br />
<br />
per_frame<br />
bc=if(b,bc+1,bc);<br />
bc=if(equal(bc,8),0,bc);<br />
mo=if(equal(bc,1),1,0);<br />
<br />
per_pixel<br />
x=0.2*mo;<br />
y=0.2*mo;<br />
<br />
(I know it can be made better with the 2 lines for bc but for the basis of this it is as soimple as possible)<br />
<br />
<br />
Now this works fine.<br />
<br />
But I don't know if I misunderstand the way AVS works or something but if you double up these scopes using the same variable the preset goes made but using new variables for bc and mo it works fine.<br />
<br />
Anyone care to explain?<br />
<br />
Anyway here are the presets one works I would expect (2 sets of different variables) the other does not (thw same variables).<br />
<br />
There are 3 points 1 just is the beat (as I do not know of a monitor function/APE in AVS I cannot see what is going off)<br />
<br />
The other 2 points move every 8th (i think) beat. In the 'broken' one it 'robs' the beat from the other scope it seems.<br />
<br />
So it seems you have to use a seperate variable for each scope or am I missing something.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">7th October 2002 15:38 GMT</span>
		</p>
		<p class="post-content">
		
		
			
		

		It turns out that I has made an idiot simple mistake. The on beat code that reads bc=if(rate,bc,bc+1); should have been bc=if(rate,0,bc+1); . <br />
<br />
D'oh! :igor: <br />
<br />
Feel free to slap me for my stupidity.<br />
<br />
I've attached the working version in case any one wants to steal the code and alter it to make their own moving points/objects 'animations'.<br />
<br />
EDIT: The code can be cleaned up a bit, there is at least one redundant statement in there.<br />
<br />
EDIT 2: Rovastar, I wanted to make them move every four beats because these points are going to be base points for reactive 3d objects, I just thought that it would be mega cool if they changed formation every now and again.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Jaheckelsafar</span><br />
			<span class="date small text-muted">7th October 2002 16:12 GMT</span>
		</p>
		<p class="post-content">
		
		

		*slap*
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Tuggummi</span><br />
			<span class="date small text-muted">15th October 2002 08:15 GMT</span>
		</p>
		<p class="post-content">
		
		

		*slaps Jheriko* :mad: <br />
Even <b>I</b> have managed to do a counter (i used it on the multimovement dynamoves on generation x)<br />
<br />
And i don't even know how to code :igor:<br />
<br />
<br />
<br />
But im glad the problem is solved already :blah: :D :blah:
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Montana</span><br />
			<span class="date small text-muted">15th October 2002 10:06 GMT</span>
		</p>
		<p class="post-content">
		
		
			
		

		jheriko, i used that fixed version of that preset and made it more disco, i did it just for fun, hop you like it
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">15th October 2002 10:18 GMT</span>
		</p>
		<p class="post-content">
		
		

		Hehe.. cool mix Montana. That beaming light effect is really disco :)<br />
<br />
You'll have to wait a few days to see what I ended up using the points for ;)
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Montana</span><br />
			<span class="date small text-muted">15th October 2002 11:55 GMT</span>
		</p>
		<p class="post-content">
		
		

		oh, can i put my mix of the temp preset in my forthcoming pack, you will get full credit for the scopes
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">15th October 2002 12:01 GMT</span>
		</p>
		<p class="post-content">
		
		

		Yeah, go for it. I'm glad to know that someone else found a good use for them. :)
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">Karnov</span><br />
			<span class="date small text-muted">17th October 2002 04:43 GMT</span>
		</p>
		<p class="post-content">
		
		

		*slap*<br />
damn you and your math/logic skills<br />
<br />
<br />
:p
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">17th October 2002 07:56 GMT</span>
		</p>
		<p class="post-content">
		
		

		If anyone is interested these points were used as the basis for my bluespectrum remix for the el-vis tribute pack.<br />
<br />
<a href="http://www.deviantart.com/deviation/796550" target="_blank">http://www.deviantart.com/deviation/796550</a>
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">geozop</span><br />
			<span class="date small text-muted">21st October 2002 07:27 GMT</span>
		</p>
		<p class="post-content">
		
			<strong>what about</strong><br />
		
		

		misc -&gt; Custom BPM?<br />
<br />
 If you don't want it to change the rest of your visualization, put it and the scopes in their own effect list.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">21st October 2002 13:59 GMT</span>
		</p>
		<p class="post-content">
		
		

		That wouldn't have worked because i needed to make the scopes finish their movements *then* wait for those beats. Using 'Custom BPM' would not wait 4 beats after the scopes have moved, but rather only give them one beat in the time that there would normally be 4, so if the scope took 4 beats to move they would constantly move, or if the took 2 then they would only wait 2.. etc, resulting in varying results for every track.
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">UnConeD</span><br />
			<span class="date small text-muted">21st October 2002 15:43 GMT</span>
		</p>
		<p class="post-content">
		
		

		Alternatively, you use something like this:<br />
(tx/y = target point, px/y = current point)<br />
<br />
onbeat:<br />
foo=below(sqrt(sqr(tx-px)+sqr(ty-py)),.05);<br />
tx=if(foo,new-point,tx);<br />
ty=if(foo,new-point,ty);<br />
<br />
This would make a point shift around onbeat as soon as they have nearly completed their movement.<br />
<br />
Oh by the way, a shorter counter is:<br />
bc = (bc+1)%8<br />
<br />
:)
		</p>
</div>

	<hr />

<div class="post">
		<p class="post-meta">
			<span class="username text-primary">jheriko</span><br />
			<span class="date small text-muted">21st October 2002 15:50 GMT</span>
		</p>
		<p class="post-content">
		
		

		Ignore my stupidity on the % issue, I realised that after I submitted that preset. :mad: <br />
<br />
I like my current method of making them move around though, mainly because its easier for me to visualise in my head how it works.
		</p>
</div>

	<hr />



<div class="footer">
		<p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
	</div>
</div>

<!-- Put JavaScript here -->

</body>
</html>