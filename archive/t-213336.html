<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta name="generator" content="HTML Tidy for Mac OS X (vers 31 October 2006 - Apple Inc. build 15.12), see www.w3.org" />
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="3d model files -&gt; render/triangle AVS" />

  <title>3d model files -&gt; render/triangle - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">3d model files -&gt; render/triangle</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=213336">3d model files -&gt; render/triangle</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">16th April 2005 09:34 GMT</span></p>

      <p class="post-content"><strong>3d model files -&gt; render/triangle</strong><br />
      i made a little tool for converting wavefront .obj into a .gvm for use with the global variable manager (load/save) ape.<br />
      <br />
      i chose .obj as its easy to read in and sketchup can export it<br />
      <br />
      also there is a preset (very simple - 50/50 blended tris) showing a ~1500 poly model, its a simple model i've made its not meant to be a preset...<br />
      <br />
      from the code you can see the megabuf structure used. the (currently) unused 1,2 and 3 slots are used to hold the face normal.<br />
      <br />
      idiots may steal this triangle and use their own exported objs with it (its intentionally rubbish)<br />
      <br />
      if you look at the code note that i shifted the model down cos i saved it 'not on the origin'. :p<br />
      <br />
      use<br />
      <br />
      objconv myobj.obj mygvm.gvm 0<br />
      <br />
      0 is the offset for the data in megabuf (you can change this if you want multiple models for example)<br />
      <br />
      example preset and model data attached:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">16th April 2005 09:37 GMT</span></p>

      <p class="post-content">also here is the tool and a slightly updated global variable manager now with less crashes. but still no aperesize support on account of my lazyness and messy code. sorry tomy.<br />
      <br />
      also sorry for two posts. its to dodge the filesize limit.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">19th April 2005 18:39 GMT</span></p>

      <p class="post-content">lots of d/ls. but no feedback. any suggestions? want more formats? find any more bugs in the gvm ape?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">eheiney</span><br />
      <span class="date small text-muted">19th April 2005 20:36 GMT</span></p>

      <p class="post-content">I downloaded it.... but I guess I didn't know what to do with it. :confused:<br />
      I thought I followed the instructions but when looking at the example, I'm presented with a blank screen.<br />
      <br />
      No problems with the gvm. I love the newer option of being able to expand the code boxes. I only wish, as you said, that it was implemented with resize support.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">20th April 2005 05:07 GMT</span></p>

      <p class="post-content">blank screen? thats odd<br />
      <br />
      i've had all kinds of complaints that its broken in varying ways... problem is i cant fix anything without feedback :)<br />
      <br />
      one thing that seems to fix it is to load one gvm preset then another then another... after three or four it seems to start working properly. i am still trying to fix it up a bit better... but i really cant work it out.<br />
      <br />
      some presets seem to work always. specifically those that don't load on the first frame and use multiple loads seem to work okay all the time. :/<br />
      <br />
      resize support will come when i work out the bugs</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">MaTTFURY</span><br />
      <span class="date small text-muted">21st April 2005 06:43 GMT</span></p>

      <p class="post-content">Way cool, but it doesn't rotate so I can see the triangle "face"</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">21st April 2005 10:34 GMT</span></p>

      <p class="post-content">Again Matt your lack of reading, logical deduction and common sense have contributed towards another rubbish post.<br />
      <br />
      It is rotating fine... but the data hasn't loaded properly...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">30th April 2005 23:43 GMT</span></p>

      <p class="post-content">by using 'load once' the load problems seem to have disappeared...<br />
      <br />
      this version uses the triangle z-buffer and back face culling to do a reasonable non-transparent render. it has some z-fighting because of the large size of some of the tris... this can be avoided in models by splitting up larger tris.<br />
      <br />
      edit: you will need to add zbclear=1 to the triangle code (per frame)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">eheiney</span><br />
      <span class="date small text-muted">1st May 2005 05:14 GMT</span></p>

      <p class="post-content">:) This brought a smile to my face. I wasn't expecting an <i>actual</i> plane.<br />
      <br />
      I don't think this is what Tomy had in mind when he wrote the triangle, but who cares? It looks awesome!<br />
      <br />
      I only wish I knew how to use triangle as well...:(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">1st May 2005 06:04 GMT</span></p>

      <p class="post-content">well open up 3ds max... model a plane. export to alias/wavefront obj (you can get a plugin if its not a default cos i have that option) then steal the triangle above and compile a different gvm using objconv. :P<br />
      <br />
      the idea of all this is that you dont have to be a frikkin genius to do some presets with 3d models.<br />
      <br />
      about using the z-buffer with triangle tho... you need to subdivide the model to avoid z-fights like that plane gets... lots of small equilateral-ish triangles are ideal.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">TomyLobo</span><br />
      <span class="date small text-muted">2nd May 2005 19:50 GMT</span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by denkensiefursic</i><br />
        <b>I don't think this is what Tomy had in mind when he wrote the triangle</b>
      </blockquote>uh, actually this was <b>exactly</b> what i had in mind when writing triangle.ape *g*
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">2nd May 2005 22:55 GMT</span></p>

      <p class="post-content">touch&#195;&#169;<br />
      <br />
      what else is triangle ape for? making 2d triangles? pfft...<br />
      <br />
      :p</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">eheiney</span><br />
      <span class="date small text-muted">3rd May 2005 04:50 GMT</span></p>

      <p class="post-content">Touch&#195;&#169;, indeed. I raise my drink to you, as it appears I am mistaken.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">Synth-C</span><br />
      <span class="date small text-muted">6th May 2005 16:27 GMT</span></p>

      <p class="post-content">Jheriko, which plugin did you use?<br />
      I already tried three, and non of them worked properly.<br />
      I end up with .gvm files that only have data on every 7th 8th and 9th line or so.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">9th May 2005 07:25 GMT</span></p>

      <p class="post-content">which plugin to export obj i guess?<br />
      <br />
      i used sketchup with the sketup obj exporter. it is important to set it to export to just triangles though... otherwise some tris will be missing... although i'm not sure thats what you mean. could you perhaps paste a little sample of the gvm to clarify the problem?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">Synth-C</span><br />
      <span class="date small text-muted">9th May 2005 14:21 GMT</span></p>

      <p class="post-content">Sure. The .obj file I used is also included in the zip.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">9th May 2005 20:21 GMT</span></p>

      <p class="post-content">no normals are in that obj file. thats why some of the data lines are always zeros</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">10th May 2005 00:32 GMT</span></p>

      <p class="post-content">further to that... (shame i can't edit after several hours :p)<br />
      <br />
      objconv averages vertex normals if they are given to create a face normal. so if you have vertex normals all over some curves (model packages often do this with curves) they will get 'flattened out' a bit.<br />
      <br />
      Since the software triangle ape has no vertex blending there is no reason to have a normal for every vertex (makes big .gvm files too).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">Warrior of the Light</span><br />
      <span class="date small text-muted">11th May 2005 19:11 GMT</span></p>

      <p class="post-content">I'm using autocad for rendering, then import it to 3ds max and export it as .obj. I suppose all dimensions should be smaller than 1 or does it autoresize the render to<br />
      &lt; 1?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">11th May 2005 20:26 GMT</span></p>

      <p class="post-content">it exports the coords in whatever scale you use in the editor. personally i just make the model then change the camera etc... to match the scale.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">PAK-9</span><br />
      <span class="date small text-muted">10th June 2005 16:33 GMT</span></p>

      <p class="post-content">For shylent,asdfg and whomever...<br />
      <br />
      notes:<br />
      <br />
      it makes an ini file on first run that you can edit to set options<br />
      <br />
      format of gmegabuf entries is:<br />
      <br />
      number of triangles<br />
      [normal]<br />
      vertices<br />
      [gloss maps etc... in the order they are in the ini file]<br />
      <br />
      I think thats right, try it out, ask me on #avs or post here if it doesnt work for some reason or you need more details</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">TomyLobo</span><br />
      <span class="date small text-muted">15th June 2005 00:51 GMT</span></p>

      <p class="post-content">ewww, sections...<br />
      interleaved ftw!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">15th June 2005 07:40 GMT</span></p>

      <p class="post-content">functional difference?<br />
      <br />
      if anything doing in by 'sections' rather than 'interleave' makes it easier to manage optional material properties.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">PAK-9</span><br />
      <span class="date small text-muted">15th June 2005 14:38 GMT</span></p>

      <p class="post-content">I wrote that description in a hurry, it is interleaved, all the data for each triangle is saved seperately<br />
      <br />
      [number of triangles]<br />
      // triangle 1<br />
      [normal x]<br />
      [normal y]<br />
      [normal z]<br />
      [vertex 1 x]<br />
      [vertex 1 y]<br />
      [vertex 1 z]<br />
      [vertex 2 x]<br />
      ...<br />
      [vertex 3 z]<br />
      [diffuse red]<br />
      [diffuse green]<br />
      [diffuse blue]<br />
      [ambient red]<br />
      [ambient green]<br />
      ...<br />
      // triangle 2<br />
      [normal x]<br />
      [normal y]<br />
      [normal z]<br />
      [vertex 1 x]<br />
      [vertex 1 y]<br />
      [vertex 1 z]<br />
      [vertex 2 x]<br />
      ...<br />
      [vertex 3 z]<br />
      [diffuse red]<br />
      [diffuse green]<br />
      [diffuse blue]<br />
      [ambient red]<br />
      [ambient green]<br />
      ...<br />
      <br />
      etc....<br />
      <br />
      incidentally I just checked the source code for Jet Wash so I could post an example of why its easiest this way... but it was saved on my desktop in a text file and I reformatted without saving it :(</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">TomyLobo</span><br />
      <span class="date small text-muted">15th June 2005 23:39 GMT</span></p>

      <p class="post-content">interleaved is faster</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">PAK-9</span><br />
      <span class="date small text-muted">16th June 2005 01:03 GMT</span></p>

      <p class="post-content">The difference in speed is negligible, its more about design preference</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">jheriko</span><br />
      <span class="date small text-muted">16th June 2005 08:27 GMT</span></p>

      <p class="post-content">if you have 12 coords for a tri (normal xyz, vertex 1/2/3 xyz)<br />
      <br />
      then interleaved is easy to code as 12*i+0, 12*i+1 etc for each component doing sections makes it annoying as you have to use sectionstart+i instead, 12*i+(1..12)+offset, storing the number of tris in offset, is normally how i do it. interleaving the triangle data and using sections (offset) to split the model into different materials.<br />
      <br />
      i know using 1 triangle render is r33t but i just prefer editing the material in avs because when you can see it in the renderer moving around and being lit you can get a feel for the effects of the values you are putting in.<br />
      <br />
      again... design preference rather than a speed thing, although it also keeps filesizes down a bit as the 'map' data is gone from the gvm files and in to the avs preset as a much smaller single assignment, rather than 100s.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">PAK-9</span><br />
      <span class="date small text-muted">16th June 2005 10:02 GMT</span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by jheriko</i><br />
        <b>i know using 1 triangle render is r33t but i just prefer editing the material in avs because when you can see it in the renderer moving around and being lit you can get a feel for the effects of the values you are putting in.</b>
      </blockquote>I cant edit those presets in AVS because I can't use the new AVSTrans (the old one causes infinate load times blah blah Im sure you know...) so that particular benefit is achedemic.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">TomyLobo</span><br />
      <span class="date small text-muted">16th June 2005 12:59 GMT</span></p>

      <p class="post-content">let's say we have 8 properties for each vertex<br /></p>
      <pre>
<code><br />interleaved:<br />index=pn*8+3; // can be optimized by counting with pn=pn+8;<br /><br />sections:<br />index=pn+3*n; // can be optimized by having 7 variables in 'Frame' (offset1=1*n; offset2=2*n; offset3=3*n; ...)<br /></code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">PAK-9</span><br />
      <span class="date small text-muted">16th June 2005 13:29 GMT</span></p>

      <p class="post-content">So I put the egg in my mouth... THEN I suck... oh ok.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="username text-primary">TomyLobo</span><br />
      <span class="date small text-muted">16th June 2005 15:28 GMT</span></p>

      <p class="post-content">one advantage is that you dont need to set 7 variables to make it effective<br />
      <br />
      the bigger advantage is that you can dynamically alter the triangle count</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
</body>
</html>
