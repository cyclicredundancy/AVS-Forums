<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">    <!-- Bootstrap core CSS -->
	<meta name="keywords" content=" Transparency APE Technical Problem, avs, advanced visualization studio, wvs, winamp visualization studio" />
	<meta name="description" content=" Transparency APE Technical Problem AVS" />
	
	<title> Transparency APE Technical Problem - Winamp Forums</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
<ol class="breadcrumb">
  <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>
  <li><a href="f-85.html">AVS</a></li>
  <li class="active">Transparency APE Technical Problem</li>
</ol>
<!-- div class="pda"><a href="t-234934.html?login=1" rel="nofollow">Log in</a></div -->
<p class="lead text-muted">Archive: <a title="Try the Wayback Machine" target="_blank" href="http://web.archive.org/web/*/http://forums.winamp.com/showthread.php?t=234934">Transparency APE Technical Problem</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">7th January 2006, 02:31</div></div>
<br />
<div class="posttext">I thought of a plugin that would look at a pixel, and if its color is juuuust the right shade of black, it acts like as if it were transparent, i.e. it is rendered in Max mode. Otherwise it renders Replace or whatever. I would like to know this: Does AVS actually allow for each pixel to be handled like this? Can I look at every one and choose its draw mode, or can I only do that with the whole image?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">DummyDDD</div><div class="date small text-muted">7th January 2006, 15:33</div></div>
<br />
<div class="posttext">I dont know so, but I doubt it, because then it require rquire thoose calcs to be done just before rendering anything, which I doubt can be done with an ape.<br />
In order to do what you suggest, you would have to make a new rendermode, which is only possible through the avs source code.<br />
<br />
Usually you can however work around not having that kind of transparancy, by first using replace (or subtractive for images) to first make a black outline of what you want to draw, and then draw what you wanted to draw (on top of something) using addictive blend.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">7th January 2006, 23:16</div></div>
<br />
<div class="posttext">I messed around with that for a while, and I couldn't get it to work like I wanted it. So you say no?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">8th January 2006, 17:20</div></div>
<br />
<div class="posttext">&quot;addictive&quot; blend, lol!<br />
<br />
that could be a name for the ape you're writing JFASI!</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">8th January 2006, 18:00</div></div>
<br />
<div class="posttext">Assuming it could be written as an APE. <br />
<br />
I gave it a bit of though, and I think I could do the same thing using Trans-&gt;Color Modifier to write whether the pixel is the color or not to a global megabuffer and then take it to the DM and alpha blend it using that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">8th January 2006, 20:26</div></div>
<br />
<div class="posttext">na that's not possible! [if I understand you right]<br />
<br />
color modifier can NOT change the color of each pixel respectively to its position<br />
e.g.<br />
<br />
red = if(above(x,0),1,red);<br />
<br />
or sth like that.<br />
<br />
Knowing that, you will see that likewise, color modifier can't get the position of a pixel. It knows only its color.<br />
<br />
So unfortunately you'll not be able to get and save the positions of all the pixels that have e.g. #010101.<br />
<br />
I would like it very much to have such a &quot;pixel reading&quot; ape. It would be very useful but slow as hell, I promise.<br />
<br />
GC</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">9th January 2006, 23:44</div></div>
<br />
<div class="posttext">So if I go :<br />
<br />
Frame:<br />
<br />
nt=0<br />
<br />
Pixel<br />
<br />
nt=nt+1;<br />
<br />
pix=if(band(equal(red,.1),band(equal(blue,.1),green,.1)),0,1);<br />
assign(gmegabuff(nt),pix)//Or however the syntax works<br />
<br />
in the color modifier, and then<br />
<br />
Frame<br />
<br />
nt=0<br />
<br />
Pixel<br />
<br />
nt=nt+1<br />
alpha=gmegabuff(nt)<br />
<br />
It wouldn't work? I thought it could actually do that.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">jheriko</div><div class="date small text-muted">10th January 2006, 01:44</div></div>
<br />
<div class="posttext">Color modifier is quite clever and can do a lot of stuff, but to do more complex per pixel effects depending on, say, the pixel position, is pretty damned slow. I wrote an APE for doing this, but abandoned it as I was going to have to make quality sacrifices and effort to make it practical... mostly effort :P<br />
<br />
As a side note it can be used to capture the framebuffer into the megabuf. If anyone else seriously wants to make an APE I would be glad to help out. Sticking the framebuffer into megabuf, perhaps as a low quality copy, is certainly possible, although without quality limits using it would automatically limit the preset to a low, just watchable speed.<br />
<br />
I would attach the per-pixel ape, but its evil and shouldnt spread. But using I made couple of presets which were doing a few assigns and adds and an abs to render stuff at about 20-30fps, so copying data from pixels to megabuf would probably be at most that slow if there is no quality loss.<br />
<br />
Interesting stuff tho, 'transparency'... /me laughs</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">10th January 2006, 03:32</div></div>
<br />
<div class="posttext">Ok, then. Any tricks to get around it? Whenever you're done laughing...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">PAK-9</div><div class="date small text-muted">10th January 2006, 16:07</div></div>
<br />
<div class="posttext">Use buffer blend noob</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">[Ishan]</div><div class="date small text-muted">10th January 2006, 16:34</div></div>
<br />
<div class="posttext">lol. PAK is like he was before :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">10th January 2006, 17:29</div></div>
<br />
<div class="posttext">Let's calculate! (im not very good at that, but what the hell.)<br />
<br />
Say you check the color value for each pixel, then you re-valuate the value to something else, that's times 2, right?<br />
Now let's calculate the pixels, say, we have a screen with the size of 400x300 (a typical fullscreen resolution?) that would mean 400*300*2 (240 000) calculations per frame. And what ever complicated formula you were intending for it, that would mean you would do that almost a quarter a million times per frame. Sound fast to you? Because it sure as hell doesn't sound too fast for me :weird:<br />
<br />
<br />
<br />
If you really want to do this, could it be possible to do it like the dynamic movement does it? As in divide the screen into a grid of points and blablabla-technicals-blablbala, so the user can decide between quality and performance.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">StevenRoy</div><div class="date small text-muted">10th January 2006, 21:43</div></div>
<br />
<div class="posttext">For sprite-like transparency, I prefer the following &quot;trick&quot;:<br />
<br />
Effect list (Output=Subtractive 1)<br />
- (Draw stuff here)<br />
- Buffer Save<br />
- Color Clip (Make everything white except pure black)<br />
- Convolution Kernel (If you want black borders around the sprites)<br />
Buffer Restore (Additive)<br />
<br />
This is somewhat similar to DummyDDD's suggestion, but more general-purpose. It's not quite the same as a true &quot;transparency&quot; render mode, but it might be close enough. (Assuming you do it right.)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">10th January 2006, 22:02</div></div>
<br />
<div class="posttext">That's what I was looking for. Buffer Blend? I don't have it.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">eheiney</div><div class="date small text-muted">11th January 2006, 00:31</div></div>
<br />
<div class="posttext">http://tomylobo.deviantart.com/</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">11th January 2006, 02:37</div></div>
<br />
<div class="posttext">Window Resize APE! Very nice. The buffer blend is sexy too.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">eheiney</div><div class="date small text-muted">11th January 2006, 02:50</div></div>
<br />
<div class="posttext">Damn, son. You've really been missing out. The window resize APE is essential to AVS artists. :D</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">11th January 2006, 06:52</div></div>
<br />
<div class="posttext">Originally posted by denkensiefursich <br />
The window resize APE is essential to AVS artists. :D <br />
<br />
It is?<br />
<br />
Funny how i manage to make a pack that gets featured even without it.<br />
<br />
Yes, weird i know, it can't possibly be true, but it is! Be amazed at my amazing avs skills :o</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">PAK-9</div><div class="date small text-muted">11th January 2006, 09:12</div></div>
<br />
<div class="posttext">Hack the dll resources noob</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">11th January 2006, 12:19</div></div>
<br />
<div class="posttext">Pak-9:<br />
<br />
Use buffer blend noob<br />
 <br />
<br />
You meant the FXlist output mode using a buffer, didn't you?<br />
<br />
<br />
And while we are discussing abilities of the Color Modifier, I checked it and noticed the frame [not &quot;pixel&quot; JFASI] section is executed 256 times a frame. Color Modifier is obviously checking each level of rgb. Sounds weird to me when we are talking mainly about pixels that have certain colors, not colors that have certain positions. :confused: <br />
Anyone an explanation?<br />
<br />
GC</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">PAK-9</div><div class="date small text-muted">11th January 2006, 13:11</div></div>
<br />
<div class="posttext">It's simply point processing. i.e. The new value of each pixel is dependant upon only the current value of the pixel. Contrast this to, say, convolution where the new value of each pixel is dependant upon the current value of the pixels surrounding it (local processing)<br />
<br />
and yes... i do mean an el set to buffer blend</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">11th January 2006, 15:48</div></div>
<br />
<div class="posttext">And how exactly does buffer output in effect list work? It doesn't exactly save it to that buffer, does it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">11th January 2006, 23:25</div></div>
<br />
<div class="posttext">You have to save a buffer somewhere [preferably only once, when the preset is started] , and use this as an output buffer simply by selecting it in input or output blend mode.<br />
<br />
<br />
I attached an example file that will serve two purposes:<br />
<br />
1. Explain the use of Buffer Blend to JFASI [look into the FX lists' code]  and<br />
2. Will show a problem I have recreating a Unique Tone [or sth that puts color to grey similarly] with a CM.<br />
Setting variable &quot;color&quot; = (r+b+g)/3; and then assigning this to r,b and g all the same should result in a grey image in my brain, but obviously it doesn't. [look into the CM]<br />
<br />
GC<br />
<br />
oh and /edit: it shows my decent gradient skills of course! :blah:</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JaVS_v2.5</div><div class="date small text-muted">12th January 2006, 08:35</div></div>
<br />
<div class="posttext">Now, a different formula. How about using a DM? Alpha?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">[Ishan]</div><div class="date small text-muted">12th January 2006, 10:23</div></div>
<br />
<div class="posttext">actually as a not-so-skilled avs'er i did prefer alpha a bit more than other options.<br />
<br />
<br />
<br />
<br />
but maybe that's why i'm  not-so-skilled :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">jheriko</div><div class="date small text-muted">13th January 2006, 15:44</div></div>
<br />
<div class="posttext">color modifier can be used to convert a pixel to another color if it is a certain color. for instance, making all white pixels black and leaving the rest alone. the way it works though is a little bit of a mystery to me. my guesswork is that it creates a look up table for each red,green,blue. this could have 255 entries as such:<br />
<br />
r/g/b newred newblue newgreen<br />
0 <br />
1<br />
2<br />
.<br />
.<br />
.<br />
<br />
the recompute every frame option will update this table per frame i think<br />
<br />
this is just guesswork, but it seems like the fastest way to do it. the obvious way of solving the problem (to actually run the code per pixel) is not practial, it comes out really slow for anything more than 4 or 5 lines of tightly optimised code.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">14th January 2006, 01:37</div></div>
<br />
<div class="posttext">Yeah, color modifier is suspiciously fast... What is behind that?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">14th January 2006, 12:08</div></div>
<br />
<div class="posttext">see color modifier calculates red with respect to itself and variables that change per frame.(thats the same of course for blue and green)<br />
this means it needs too calculate a list with 256(possible red values) * 3(red , green ,blue) values per frame which is really fast.<br />
if you wanted to do modify red  with respect to itself and blue and green it would have to calculate a list with 256(possible red values) *256(possible blue values) *256(possible green values) * 3(red,green,blue) = 50331648 values which cant be fast.<br />
thats why we cant  easily do a saturation change with colormod</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">14th January 2006, 14:01</div></div>
<br />
<div class="posttext">Amen. I was about to say.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">14th January 2006, 14:31</div></div>
<br />
<div class="posttext">damn typo!!</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">14th January 2006, 19:58</div></div>
<br />
<div class="posttext">so I can't redo a unique tone with CM. :(<br />
<br />
and I can't even do a channel shift!</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">14th January 2006, 20:53</div></div>
<br />
<div class="posttext">To do unique tone, you'd need to find a way to convert rgb to shb color notation. I'm sure there's a way. I'll get to it. Tomorrow.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">StevenRoy</div><div class="date small text-muted">14th January 2006, 22:31</div></div>
<br />
<div class="posttext">If you want a &quot;Unique Tone&quot; that changes color over time, you can use a white Unique Tone followed by a Color Modifier that'll scale the red, green, and blue accordingly, to turn the white into another color (or even a spectrum). You may need to wrap an Effect List around this if you need a blend mode (such as Additive).<br />
<br />
A programmable Channel Shift can be emulated, too, but it may require some trickery with multiple Channel Shifts, plus Effect Lists and/or buffers. I've never had a reason to try this; Onbeat Random is usually good enough for me.<br />
<br />
Regarding the transparency example I posted earlier: Yes, it is possible to do the same thing with a Buffer output mode. In fact, that's the way I used to do this kind of transparency before I discovered the &quot;subtract-and-add&quot; method. Now I wonder, though, which is faster? I figured that the latter would be, but I suppose I (or someone) should experiment to confirm this.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">15th January 2006, 01:26</div></div>
<br />
<div class="posttext">thanks steven, but I wanted to do some further optimization:<br />
<br />
before:<br />
-EL{ (substr.1 out)<br />
--Unique Tone<br />
--EL{ (add. out)<br />
---Invert<br />
--}<br />
--Multiplier x2<br />
-}<br />
<br />
now:<br />
-EL{ (substr.1 out)<br />
--Unique Tone<br />
--Color Modifier: r = (1-r*2)*2 [for each r/g/b]<br />
-}<br />
<br />
desired:<br />
-Color Modifier: r = r-(insert impossible UT code here(1-r*2)*2) [r/g/b]<br />
<br />
:)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">15th January 2006, 14:07</div></div>
<br />
<div class="posttext">in the attachment is a preset that can decrease saturation and can dynamically tint the unique tone.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">15th January 2006, 15:24</div></div>
<br />
<div class="posttext">say, how many spaghetti renditions do you have?<br />
<br />
nice preset, but the tinting isn't so special, to be honest...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">15th January 2006, 16:43</div></div>
<br />
<div class="posttext">It's a good technical preset. Which is all I seem to able to do at the moment :(</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">15th January 2006, 18:01</div></div>
<br />
<div class="posttext">i got 87 different presets handling with worms/spaghettis/strings because whenever i try out another graphical effect i do that with a worm preset.<br />
<br />
the preset above was meant to show technical possibilities</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">JFASI</div><div class="date small text-muted">15th January 2006, 18:44</div></div>
<br />
<div class="posttext">Why? cuz there's so much wriggling and movement?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">15th January 2006, 18:57</div></div>
<br />
<div class="posttext">yeah</div></div><hr />
<div class="footer">
	<p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
</div>
</div>

</body>
</html>