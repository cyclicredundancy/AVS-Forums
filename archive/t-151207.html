<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="DM question" />

  <title>DM question - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">DM question</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=151207">DM question</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 06:37 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>DM question</strong><br />
      if I use too many variables in a DM will it fail to work?<br />
      I think I have too many variables so even when I set x=x+.1 or something like that, it wont work. Any input?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 06:49 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">With the public releases of avs the variable limit is 64 if i recall right, however with the 2.7pre releases it has been raised to 256. So when Winamp5 comes out and the final version of avs2.7 you can use 256 different named variables and in addition to that you can use global variables :D<br />
      <br />
      And to your question, if you add a new variable after the 64 it will break down and your winamp will perform a "illegal operation" :rolleyes:</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 06:51 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">so do you have any idea why that wouldn't work then? I'm trying my hand at raytracing and I cant figure out why it wont do anything at all... even with that basic movement.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 09:04 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Hmm...<br />
      All i can think of that you don't have rectangular coordinates checked, but that's really a n00b problem usually and i doubt you're new to avs since your talking about ray-tracing :D<br />
      <br />
      I don't know what could be the problem then. Im just learning raytracing, well i got the basic "engine" figured out somehow, but it's hard to create your own special shapes etc. with it.<br />
      <br />
      Maybe you should post your code here or the preset, so someone could help you. It's pretty hard to figure out exactly what your problem is right now.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 09:37 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">ehh I got it working. Well except the correct texture mapping. I got it to raytrace a sphere.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 09:56 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Heh :rolleyes:<br />
      <br />
      Good for you :p</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 10:00 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">one last question. texture mapping. what kind of system do you guys use? cylindrical? spherical?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Tuggummi</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 10:07 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Haven't actually tried yet any other texture mapping than what you use when you draw straight planes :rolleyes: Tho i did manage to mangle out a inside-a-cube-dm just with straight down experimenting :p<br />
      <br />
      But i guess it depends a lot of what you are drawing :) I.e for a round sided tunnel i used cylindrical, which if i remember right was x=atan2(ix,iy) ;<br />
      y=iz ;<br />
      <br />
      I think if you search the avs forums for raytracing you should come up with some useful links :) Also there might be something in the FAQ or in the "Tips &amp; Tricks" thread.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 18:26 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">ok so can someone help me figure out why its not texture mapping correctly. I'm using spherical coords. l=radius, ix,iy,iz=intersection point.<br />
      <br />
      phi=l;<br />
      rho=acos(iy/phi);<br />
      theta=acos(iz/(phi*sin(rho)));<br />
      x=1-2*theta/(2*pi);<br />
      y=1-2*rho/(pi);<br />
      <br />
      And yes I already know its not optimized. Please dont just post a bunch of optimization suggestions...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 18:33 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I think it would be faster to use an atan, because you avoid some costly divisions, and let the math lib handle things like that (faster).<br />
      <br />
      frame:<br />
      irad = 1/radius;<br />
      point:<br />
      rho=acos(iy*irad);<br />
      theta=atan2(iz,ix);<br />
      <br />
      It's also better to multiply by the reciprocal rather than dividing by a constant. You can memorize stuff like 1/pi because you don't need much accurace in AVS anyway. 1/pi ~ 0.318</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 19:59 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">even with that code I get this really distorted image on the sphere. It's unrecognizable. I found the scalar for the intersection by solving the equation of a sphere then plugged it back into the ray equations to find the intersection. Then converted to spherical coords for texture mapping. Did I do something wrong in there?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 21:00 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">my image just gets VERY distorted at the top and bottom. is there some fix for this?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 22:36 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">yeah so spherical mapping sucks a lot. cylindrical works so much better...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jaak</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 05:27 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">oooh.... now i see this thread... nm<br />
      <br />
      it depend on the shape what mapping you need to use, doesnt it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 06:21 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">I do have one problem with my sphere. I'm using cylindrical coords but where the ends of the texture meet I'm getting some major distortion. It seems like a rounding error to me but I dont know... Any ideas?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jaak</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 07:56 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">you use:<br />
      x=atan2(pz,px)*(2*pi);<br />
      y=asin(py)*2/pi;<br />
      for me it doesnt give that major distortion... maybe you are just overrating powers of dm, the grid size is really small and the dm wasnt build to deal with the raytracing (no vector support etc.)<br />
      <br />
      send the preset maybe I or somebody else can help<br />
      <br />
      [edit]if you want to see my dm sphere then i posted it under your other thread<br />
      oh yea: USE EDIT BUTTON thankyouverymuch[/edit]</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 08:26 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Did you use spherical coords on that? I dont know. I tried mapping a bitmap of the earth onto my sphere with cylindrical coords and it looks great except for the spot where the edges of the bitmap touch...<br />
      <br />
      Here check it out. I know its not optimized. It's easier to understand when it isn't and it's still just a test preset.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jaak</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 11:27 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">works indeed and the ugly edge is normal, nothing to worry about<br />
      <br />
      heck, i dont understand the most of your code<br />
      do you use rotation axes or rotation matrices?<br />
      the if you use the matrices, then dont do it, the axes are much more better to read and understand, the matrices can be little faster tho'<br />
      <br />
      the sphere can be dont much less code than you have, just look others code, im sure you find faster and better way your 3d skills seem to be really good</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 17:56 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Any idea why there is that line that passes through the pacific ocean?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jaak</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 18:30 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">this is just another <u>normal</u> hack of dm<br />
      <br />
      you use grid size 500x500 then its not so noticable</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">3rd October 2003 21:50 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Yeah its simplified matrix style rotation. Whats the other way like?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Jaak</span><br /></p>

      <p class="post-time small text-muted">4th October 2003 14:42 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">ok, here are two examples...<br />
      the simple rotation is one i made quick and is really simple (x and y rotations).<br />
      the second one is whanna-be-ready-for-dm-syncing-ssc but i think there is something wrong with it<br />
      <br />
      [edit]<br />
      oops, fixed the rot.avs<br />
      <a href="http://acko.net/dump/jaak/rot.zip" target="_blank">http://acko.net/dump/jaak/rot.zip</a> &lt;-- this is now correct<br />
      remember to have avs2.7 pre3 for this coz i added comments its now allmost a tutorial...<br />
      <br />
      ...and yes, my english really s*cks<br />
      [/edit]</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Deamon</span><br /></p>

      <p class="post-time small text-muted">4th October 2003 22:11 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Nice one Jack :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fragmer</span><br /></p>

      <p class="post-time small text-muted">5th October 2003 09:59 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">If you want to kill those edges use this for alpha:<br />
      alpha=-d*10+4.75<br />
      And set the grid size to about 40/40 - 50/50.<br />
      <br />
      And the line in the Ocean... don't know about it :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UIUC85</span><br /></p>

      <p class="post-time small text-muted">5th October 2003 10:37 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">It's just because when you get the cylindrical coords DM doesn't know enough to wrap the texture from one end to the other. Instead it takes the whole image and scrunches it into that small area. Unless someone can think of a way to fool AVS into actually wrapping across the image its just gonna have to stay there.</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
</body>
</html>
