<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">    <!-- Bootstrap core CSS -->
	<meta name="keywords" content=" DM question, avs, advanced visualization studio, wvs, winamp visualization studio" />
	<meta name="description" content=" DM question AVS" />
	
	<title> DM question - Winamp Forums</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
<ol class="breadcrumb">
  <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>
  <li><a href="f-85.html">AVS</a></li>
  <li class="active">DM question</li>
</ol>
<!-- div class="pda"><a href="t-151207.html?login=1" rel="nofollow">Log in</a></div -->
<p class="lead text-muted">Archive: <a title="Try the Wayback Machine" target="_blank" href="http://web.archive.org/web/*/http://forums.winamp.com/showthread.php?t=151207">DM question</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 06:37</div></div>
<br />
<div class="posttext">if I use too many variables in a DM will it fail to work?<br />
I think I have too many variables so even when I set x=x+.1 or something like that, it wont work. Any input?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">2nd October 2003, 06:49</div></div>
<br />
<div class="posttext">With the public releases of avs the variable limit is 64 if i recall right, however with the 2.7pre releases it has been raised to 256. So when Winamp5 comes out and the final version of avs2.7 you can use 256 different named variables and in addition to that you can use global variables :D<br />
<br />
And to your question, if you add a new variable after the 64 it will break down and your winamp will perform a &quot;illegal operation&quot; :rolleyes:</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 06:51</div></div>
<br />
<div class="posttext">so do you have any idea why that wouldn't work then?  I'm trying my hand at raytracing and I cant figure out why it wont do anything at all...  even with that basic movement.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">2nd October 2003, 09:04</div></div>
<br />
<div class="posttext">Hmm...<br />
All i can think of that you don't have rectangular coordinates checked, but that's really a n00b problem usually and i doubt you're new to avs since your talking about ray-tracing :D<br />
<br />
I don't know what could be the problem then. Im just learning raytracing, well i got the basic &quot;engine&quot; figured out somehow, but it's hard to create your own special shapes etc. with it.<br />
<br />
Maybe you should post your code here or the preset, so someone could help you. It's pretty hard to figure out exactly what your problem is right now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 09:37</div></div>
<br />
<div class="posttext">ehh I got it working.  Well except the correct texture mapping.  I got it to raytrace a sphere.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">2nd October 2003, 09:56</div></div>
<br />
<div class="posttext">Heh :rolleyes:<br />
<br />
Good for you :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 10:00</div></div>
<br />
<div class="posttext">one last question.  texture mapping.  what kind of system do you guys use?  cylindrical?  spherical?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Tuggummi</div><div class="date small text-muted">2nd October 2003, 10:07</div></div>
<br />
<div class="posttext">Haven't actually tried yet any other texture mapping than what you use when you draw straight planes :rolleyes: Tho i did manage to mangle out a inside-a-cube-dm just with straight down experimenting :p <br />
<br />
But i guess it depends a lot of what you are drawing :) I.e for a round sided tunnel i used cylindrical, which if i remember right was x=atan2(ix,iy) ;<br />
y=iz ;<br />
<br />
I think if you search the avs forums for raytracing you should come up with some useful links :) Also there might be something in the FAQ or in the &quot;Tips &amp; Tricks&quot; thread.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 18:26</div></div>
<br />
<div class="posttext">ok so can someone help me figure out why its not texture mapping correctly.  I'm using spherical coords. l=radius, ix,iy,iz=intersection point.<br />
<br />
phi=l;<br />
rho=acos(iy/phi);<br />
theta=acos(iz/(phi*sin(rho)));<br />
x=1-2*theta/(2*pi);<br />
y=1-2*rho/(pi);<br />
<br />
And yes I already know its not optimized.  Please dont just post a bunch of optimization suggestions...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UnConeD</div><div class="date small text-muted">2nd October 2003, 18:33</div></div>
<br />
<div class="posttext">I think it would be faster to use an atan, because you avoid some costly divisions, and let the math lib handle things like that (faster).<br />
<br />
frame:<br />
irad = 1/radius;<br />
point:<br />
rho=acos(iy*irad);<br />
theta=atan2(iz,ix);<br />
<br />
It's also better to multiply by the reciprocal rather than dividing by a constant. You can memorize stuff like 1/pi because you don't need much accurace in AVS anyway. 1/pi ~ 0.318</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 19:59</div></div>
<br />
<div class="posttext">even with that code I get this really distorted image on the sphere.  It's unrecognizable.  I found the scalar for the intersection by solving the equation of a sphere then plugged it back into the ray equations to find the intersection.  Then converted to spherical coords for texture mapping.  Did I do something wrong in there?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 21:00</div></div>
<br />
<div class="posttext">my image just gets VERY distorted at the top and bottom.  is there some fix for this?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">2nd October 2003, 22:36</div></div>
<br />
<div class="posttext">yeah so spherical mapping sucks a lot.  cylindrical works so much better...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Jaak</div><div class="date small text-muted">3rd October 2003, 05:27</div></div>
<br />
<div class="posttext">oooh.... now i see this thread... nm<br />
<br />
it depend on the shape what mapping you need to use, doesnt it?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">3rd October 2003, 06:21</div></div>
<br />
<div class="posttext">I do have one problem with my sphere.  I'm using cylindrical coords but where the ends of the texture meet I'm getting some major distortion.  It seems like a rounding error to me but I dont know...  Any ideas?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Jaak</div><div class="date small text-muted">3rd October 2003, 07:56</div></div>
<br />
<div class="posttext">you use:<br />
x=atan2(pz,px)*(2*pi);<br />
y=asin(py)*2/pi;<br />
for me it doesnt give that major distortion... maybe you are just overrating powers of dm, the grid size is really small and the dm wasnt build to deal with the raytracing (no vector support etc.)<br />
<br />
send the preset maybe I or somebody else can help<br />
<br />
if you want to see my dm sphere then i posted it under your other thread<br />
oh yea: USE EDIT BUTTON thankyouverymuch</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">3rd October 2003, 08:26</div></div>
<br />
<div class="posttext">Did you use spherical coords on that?  I dont know.  I tried mapping a bitmap of the earth onto my sphere with cylindrical coords and it looks great except for the spot where the edges of the bitmap touch...<br />
<br />
Here check it out.  I know its not optimized.  It's easier to understand when it isn't and it's still just a test preset.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Jaak</div><div class="date small text-muted">3rd October 2003, 11:27</div></div>
<br />
<div class="posttext">works indeed and the ugly edge is normal, nothing to worry about<br />
<br />
heck, i dont understand the most of your code<br />
do you use rotation axes or rotation matrices?<br />
the if you use the matrices, then dont do it, the axes are much more better to read and understand, the matrices can be little faster tho'<br />
<br />
the sphere can be dont much less code than you have, just look others code, im sure you find faster and better way your 3d skills seem to be really good</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">3rd October 2003, 17:56</div></div>
<br />
<div class="posttext">Any idea why there is that line that passes through the pacific ocean?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Jaak</div><div class="date small text-muted">3rd October 2003, 18:30</div></div>
<br />
<div class="posttext">this is just another normal hack of dm<br />
<br />
you use grid size 500x500 then its not so noticable</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">3rd October 2003, 21:50</div></div>
<br />
<div class="posttext">Yeah its simplified matrix style rotation.  Whats the other way like?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Jaak</div><div class="date small text-muted">4th October 2003, 14:42</div></div>
<br />
<div class="posttext">ok, here are two examples...<br />
the simple rotation is one i made quick and is really simple (x and y rotations).<br />
the second one is whanna-be-ready-for-dm-syncing-ssc but i think there is something wrong with it<br />
<br />
<br />
oops, fixed the rot.avs <br />
http://acko.net/dump/jaak/rot.zip  &lt;-- this is now correct<br />
remember to have avs2.7 pre3 for this coz i added comments its now allmost a tutorial... <br />
<br />
...and yes, my english really s*cks</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Deamon</div><div class="date small text-muted">4th October 2003, 22:11</div></div>
<br />
<div class="posttext">Nice one Jack :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">fragmer</div><div class="date small text-muted">5th October 2003, 09:59</div></div>
<br />
<div class="posttext">If you want to kill those edges use this for alpha:<br />
alpha=-d*10+4.75<br />
And set the grid size to about 40/40 - 50/50.<br />
<br />
And the line in the Ocean... don't know about it :)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UIUC85</div><div class="date small text-muted">5th October 2003, 10:37</div></div>
<br />
<div class="posttext">It's just because when you get the cylindrical coords DM doesn't know enough to wrap the texture from one end to the other. Instead it takes the whole image and scrunches it into that small area. Unless someone can think of a way to fool AVS into actually wrapping across the image its just gonna have to stay there.</div></div><hr />
<div class="footer">
	<p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
</div>
</div>

</body>
</html>