<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="serveTV" />

  <title>serveTV - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">serveTV</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=149852">serveTV</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br /></p>

      <p class="post-time small text-muted">20th September 2003 19:42 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"><strong>serveTV</strong><br />
      i made a kinda stupid software, called <a href="http://nsis.whyeye.org/servetv.zip" target="_blank">serveTV v0.0.4</a> . the purpose of this freeware tool is to make screenshots in custom intervals and upload them to a server (ftp, not sure about http).<br />
      <br />
      current features:<br />
      * capture fullscreen<br />
      * customizable jpeg compression<br />
      * upload to ftp in intervals<br />
      <br />
      todo list:<br />
      * create html file<br />
      * more jpeg custumization<br />
      * advanced upload controls<br />
      * abort process button<br />
      * documentation<br />
      <br />
      the software uses <a href="http://curl.haxx.se/" target="_blank">cURL</a> for file transfer and <a href="http://www.ijg.org" target="_blank">cjpeg</a> (modified by <a href="http://acko.net" target="_blank">steven wittens</a>) for compression.<br />
      <br />
      most will find this tool pretty useless, since it's even slow in my 100mbit lan (pentium 4 2.4ghz/1gb ram runs serveTV, powermac g3 667mhz/512mb ram) displays images). i admit it's kinda absurd (like a read-only vnc), but i will put this in my portfolio for the university of applied arts. beside this, i use this to *stream* images of some visualizations to my httpd.<br />
      <br />
      enjoy or ignore :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">sidd</span><br /></p>

      <p class="post-time small text-muted">21st September 2003 02:59 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">thats pretty nice.. i was doing somthng similar a week or two ago. Trying to catch my friend hunting pr0n on my computer.<br />
      <br />
      but um.. yath.. "AVS"?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Phaze1987</span><br /></p>

      <p class="post-time small text-muted">22nd September 2003 22:12 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">its not stupid,its kinda sweet :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br /></p>

      <p class="post-time small text-muted">30th September 2003 13:01 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">i figured the mistake and sent a pm to rova in the very second after posting this.<br />
      <br />
      unfortunately i could not let this capture the avs window only, since it's a sub-window of winamp. maybe in future, this software is like a joke anyway.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Rovastar</span><br /></p>

      <p class="post-time small text-muted">30th September 2003 22:49 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Sorry I didn't really know where to repost it more relevant. *shrug* so left it here</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Magic.X</span><br /></p>

      <p class="post-time small text-muted">1st October 2003 11:22 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by killahbite</i><br />
        <b>unfortunately i could not let this capture the avs window only, since it's a sub-window of winamp.</b>
      </blockquote>This is no problem at all.<br />
      <br />
      Do the following (for avs2.6):<br />
      <br />
      Find the avs-window. (the winamp onwed one)<br />
      Use FindWindowEx to get the client avswnd.<br />
      Get avswnd's position.<br />
      Make a screenshot of this section.<br />
      <br />
      I can give you some ready-made code for this (Hotlist-Source excerpt) if you want. ;)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br /></p>

      <p class="post-time small text-muted">1st October 2003 11:36 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">apfel + birne = ??</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Magic.X</span><br /></p>

      <p class="post-time small text-muted">1st October 2003 11:48 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">apfel + birne = polymorphe Frucht :D<br />
      <br />
      //edit<br />
      <br />
      It wont be too hard to change te code from delphi to c++.<br />
      The shell commands are all the same and the rest wont take long.<br />
      <br />
      Btw, when i found a solution to the screenshot problem in general, it was in vBasic (thanx to goeb again). I had to change a lot. Now the code is more advanced and only some lines long.<br />
      <br />
      I'll post it here tomorrow. (i if remember to copy it when i'm home)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br /></p>

      <p class="post-time small text-muted">1st October 2003 12:03 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Magic.X</i><br />
        <b><br />
        <br />
        It wont be too hard to change te code from delphi to c++</b>
      </blockquote>maybe, but i'm neither using delphi nor c++ :p<br />
      <br />

      <blockquote>
        <i>Originally posted by Magic.X</i><br />
        <b>apfel + birne = polymorphe Frucht</b>
      </blockquote>interessant, dass alle mathelehrer eines übersehen haben. geld lässt uns dinge vergleichen, die nicht vergleichbar sind (ein apfel = halbe stunde auto waschen) ;)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Magic.X</span><br /></p>

      <p class="post-time small text-muted">1st October 2003 13:48 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Rofl! :blah:<br />
      <br />
      [Ironiemodus]<br />
      Ein hoch auf unsere kommerzialisierte Gesellschaft!<br />
      [/Ironiemodus]<br />
      <br />
      What the heck do you use for programming?<br />
      <br />
      At least it should support win32 commands, does it?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Magic.X</span><br /></p>

      <p class="post-time small text-muted">2nd October 2003 07:32 <abbr title="Coordinated Universal Time">UTC</abbr></p>

      <p class="post-content">Now here my crappy Code ;)<br />
      <br />
      <font face="courier new"><br />
      procedure THotlistScreenshot.FormCreate(Sender: TObject);<br />
      <br />
      Var <b>//declaring all the vars we need</b><br />
      H,H2 :hwnd;<br />
      DeskHdC :Longint;<br />
      r :TRect;<br />
      z :string;<br />
      b :integer;<br />
      xp,new :boolean;<br />
      <br />
      begin<br />
      new:=false;<br />
      <b>//scan for the avswnd of avs 2.51</b><br />
      H:=findwindow('avswnd',nil);<br />
      <b>//if avswnd is not found for 2.51, scan for higher versions, which are bound into a Winaamp Gen Window. set new=true if found</b><br />
      if H=0 then<br />
      begin<br />
      H2:=findwindow('Winamp Gen','AVS');<br />
      H:=findwindowex(H2,0,'avswnd',nil);<br />
      new:=true;<br />
      end;<br />
      <b>//get avswnd's screen rectangle</b><br />
      GetWindowRect(H,r);<br />
      <b>//move avswnd or WA Gen on top to ensure you get a full uncovered image</b><br />
      If new then SetWindowPos(H2,hwnd_top,0,0,0,0,swp_nomove+swp_nosize)<br />
      else SetWindowPos(H,hwnd_top,0,0,0,0,swp_nomove+swp_nosize);<br />
      <b>//sleeping according to custom responsiveness, not needed in serveTV</b><br />
      Sleep(HotlistMain.resp);<br />
      <b>//now we do repeat the following code until we don't get any exception. this is used because xp tends to retrieve errors instead of results when using GetDC</b><br />
      repeat<br />
      try<br />
      xp:=false;<br />
      DeskHdc:=GetDC(H);<br />
      except<br />
      xp:=true;<br />
      end;<br />
      until (xp=false);<br />
      <b>//clean up the Image that may have been used before</b><br />
      Image1.Picture:=nil;<br />
      <b>//lets make the screenshot. for versions 2.51 and before we need to substract the borders. higher versions don't have any borders due to the WAGen window</b><br />
      try<br />
      if new then<br />
      begin<br />
      Image1.height:=r.Bottom-r.Top;<br />
      Image1.width:=r.Right-r.Left;<br />
      BitBlt(Image1.Canvas.Handle,0,0,r.Right,r.Bottom,DeskHdc,0,0,SRCCOPY);<br />
      end<br />
      else<br />
      begin<br />
      Image1.height:=r.Bottom-20-r.Top;<br />
      Image1.width:=r.Right-13-r.Left;<br />
      BitBlt(Image1.Canvas.Handle,-7,-15,r.Right-6,r.Bottom+5,DeskHdc,0,0,SRCCOPY);<br />
      end;<br />
      except<br />
      end;<br />
      <b>//repaint the image, this may be not nessecary</b><br />
      Image1.Repaint;<br />
      <b>//move our window back on top</b><br />
      SetWindowPos(HotlistScreenshot.Handle,hwnd_top,0,0,0,0,swp_nomove+swp_nosize);<br />
      end;<br /></font><br />
      <br />
      This should work with a bit of changing in nearly ecvery language on a w32 system. The w32 commands will stay the same, its just messing with the syntax. :)</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
</body>
</html>
