<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Experimental multiprocessor support" />

  <title>Experimental multiprocessor support - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-139.html">AVS Troubleshooting</a></li>

      <li class="active">Experimental multiprocessor support</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=171172">Experimental multiprocessor support</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Uproy</span><br />
      <p class="post-time small text-muted">27th February 2004 05:27 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content"><strong>Experimental multiprocessor support</strong><br />
      How does the SMP(AVS Editor &gt; Settings &gt; Display ) affect framerate and beat detection?<br />
      Anybody uses Winamp AVS on multiprocessor?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <p class="post-time small text-muted">17th March 2004 10:59 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">what I'm curious about is: how does the whole thing work???<br />
      All the effects in AVS must be done in the right order to achieve the correct results so how do they split that up to multiple threads?<br />
      I've got a Dual Celeron 466 here I'll test that... got a specific preset for testing?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br />
      <p class="post-time small text-muted">17th March 2004 13:32 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">Effects like the DM or Movement can (partially) be split into chunks for parallel processing. Only intra-effect splitting is performed, not inter-effect.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <p class="post-time small text-muted">17th March 2004 13:44 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">ok, DM is a point :)<br />
      but SSC/Texer II can in most cases not be split i think<br />
      <br />
      i'm gonna try a raytracing avs on my dual cel...</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <p class="post-time small text-muted">17th March 2004 14:38 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content"><strong>Test results</strong><br />
      I tested the SMP thing now :)<br />
      Hardware:<br />
      Abit BP-6<br />
      2 Celeron466 Processors<br />
      256 MB RAM (66 MHz SDR i think)<br />
      ELSA GeForce 256 SDR<br />
      <br />
      Software:<br />
      Windows 2000 Professional SP3<br />
      Winamp 5.02<br />
      AVS 2.81b<br />
      Desktop Resolution 1024x768x32<br />
      AVS Resolution 332x343 with Pixel Doubling (=168x171)<br />
      VSync enabled<br />
      <br />
      I used a modified version of "Jheriko - Pack 9\Jheriko - UnConeD - 23 - VJ Chmutov.avs"<br />
      <br />
      I removed the SSCs from the main list and put ph=10; at the beginning of the frame part of the DM. I also commented out the rotation line.<br />
      <br />
      grid size/framerate without SMP/framerate with SMP(2 threads)<br />
      168x171/2.6/2.6<br />
      83x86/8.0/8.5<br />
      42x43/17.1-17.7/17.9-18.6<br />
      10x10/27.9-28.3/29.7-30.1<br />
      <br />
      that's a performance of:<br />
      168x171: 0.00%<br />
      83x86: 6.25%<br />
      42x43: 4.68%-5.08%<br />
      10x10: 6.45%-6.63%<br />
      <br />
      not really that high (at least for my crappy PC :) )</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">UnConeD</span><br />
      <p class="post-time small text-muted">17th March 2004 19:53 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">It all depends on the effects. Justin once told me which effects had been converted. I think DM, Movement, Blur, Fadeout, Colorfade.<br />
      <br />
      My APEs aren't compatible with SMP, I might do Colormap, Channelshift, Multiplier and Colorreduction (also splittable) if people are interested.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">schnorri</span><br />
      <p class="post-time small text-muted">2nd June 2009 16:14 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">hey guys !<br />
      <br />
      i realy like using avs on my full hd tv<br />
      using multiprocessing makes it work what's in only one thread unthinkable.<br />
      <br />
      but there is the problem, that some avs presets crashes down my winamp immediately while using multiprocessing.<br />
      <br />
      so my question is:<br />
      what exactly is the problem ?<br />
      knowing this, i'd be able to select out all presets with the not compatible content.<br />
      <br />
      please excuse my bad english, that's not my first language<br />
      <br />
      greetings from germany and thanks in advance.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Warrior of the Light</span><br />
      <p class="post-time small text-muted">2nd June 2009 16:43 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">Don't expect double speeds or anything. Internally, it's hardly used even if you get it to work properly.<br />
      <br />
      I don't know if it causes AVS to crash. I mean, AVS has always tended to crash now and then, with or without SMP.<br />
      <br />
      More likely is that you're using the newest version of AVS (2.82). It's (very) unstable. Look for 2.81d and install that one instead.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <p class="post-time small text-muted">3rd June 2009 13:55 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">i running avs using 4 threads and it runs just as stable as with only 1!</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">schnorri</span><br />
      <p class="post-time small text-muted">3rd June 2009 15:27 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">does anyone got a linkt to the 2.81d version ?<br />
      <br />
      and in deet i've got nearly double speed with smp.<br />
      <br />
      in zamuz - spiritual.avs<br />
      i got with 8 threads ~22 frames<br />
      using just one thread that are ~12 frames<br />
      testet at 1920*1080@32BPP</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <p class="post-time small text-muted">3rd June 2009 15:59 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by schnorri</i><br />
        <b>does anyone got a linkt to the 2.81d version ?</b>
      </blockquote><a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?postid=2502758#post2502758" target="_blank">click here</a><br />
      <br />

      <blockquote>
        <b>and in deet i've got nearly double speed with smp.</b>
      </blockquote>as described <a href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?postid=2523359#post2523359" target="_blank">here</a>, i can confirm that the fps increase more dramatically with smp, if wait-for-retrace (wtr) is disabled. however, i prefer the picture quality with wtr enabled.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">schnorri</span><br />
      <p class="post-time small text-muted">4th June 2009 16:57 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">thanks for the link<br />
      <br />
      disabling wtr doesn't take efekt in fps on my pc, i just tested this</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">schnorri</span><br />
      <p class="post-time small text-muted">5th June 2009 12:33 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content">okay, the v2.81d works fine !<br />
      thanks again !</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <p class="post-time small text-muted">5th June 2009 14:56 <abbr title="Coordinated Universal Time<abbr title="Coordinated Universal Time">UTC</abbr></p></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by Yathosho</i><br />
        <b>..if wait-for-retrace (wtr) is disabled..</b>
      </blockquote>should've been wfr of course!<br />
      <br />

      <blockquote>
        <i>Originally posted by schnorri</i><br />
        <b>disabling wtr doesn't take efekt in fps on my pc, i just tested this</b>
      </blockquote>you sure you switched it in the right setting (display vs fullscreen)? with wfr switched off, i have gains ranging from 50% to 333% - depending on the complexity of the preset.
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
</body>
</html>
