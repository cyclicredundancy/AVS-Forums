<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="New improved avi player APE " />

  <title>New improved avi player APE - AVS Forums</title><!-- Bootstrap core CSS -->
  <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" /><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
</head>

<body>
  <div class="container">
    <!-- Put navigation bar here -->

    <ol class="breadcrumb">
      <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>

      <li><a href="f-85.html">AVS</a></li>

      <li class="active">New improved avi player APE</li>
    </ol>

    <p class="lead text-muted">Archive: <a title="Try the Internet Archive" target="_blank" href="http://web.archive.org/web/*/forums.winamp.com/showthread.php?t=202158">New improved avi player APE</a></p><br />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">15th December 2004 19:01 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>New improved avi player APE</strong><br />
      Hi !<br />
      I just made an improved AVI renderer for AVS featuring:<br />
      <br />
      - better stability (no more crash when changing files without disabling rendering)<br />
      - better speed control, with frames skipping<br />
      - pause &amp; reset video buttons<br />
      - luma &amp; chroma keying<br />
      <br />
      <a href="http://goebish.free.fr/vfx/aviplayer.jpg" target="_blank">http://goebish.free.fr/vfx/aviplayer.jpg</a><br />
      <br />
      Controls should be self explanary,<br />
      Chroma keying is far from being perfect but it works<br />
      pretty well for what I do with it :)<br />
      <br />
      Get this new APE at: <a href="http://goebish.free.fr/vfx" target="_blank">http://goebish.free.fr/vfx</a></p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fsk</span><br />
      <span class="post-time small text-muted">16th December 2004 17:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nice ape.<br />
      never realy used avis in my presets or anywhere:). might i ask whats wrong with Pixelplayer ape? it seems to work fast and somewhat stable. Havent tryed to work with it myself and it prolly woldnt be a good thing to use with hotlist because they both need lots of ram.<br />
      <br />
      <br />
      <br />
      <br />
      btw why doesnt playlister work with the new avs:/</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">16th December 2004 23:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Pixelplayer APE require ram because it decompress entire video stream into memory for fast frames access, allowing reverse playing with non/poor keyed video file and other things.<br />
      Mine doesn't, but they don't have the same application (both are for live performance anyway).<br />
      <br />
      Magic's Hotlist (hi mate!) doesn't take so much memory, it just preload presets's snapshots, that's not so much.<br />
      <br />
      Playlister works very well with newer Winamp/AVS, just use classic style instead of modern, only resizing of render window don't work.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fsk</span><br />
      <span class="post-time small text-muted">20th December 2004 08:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        Magic's Hotlist (hi mate!) doesn't take so much memory, it just preload presets's snapshots, that's not so much.
      </blockquote>it does if you have a lot of them:)<br />
      <br />

      <blockquote>
        Playlister works very well with newer Winamp/AVS, just use classic style instead of modern, only resizing of render window don't work.
      </blockquote>I read it in the help file, and because i cant get it to work i thought this was the reason. It crashes when i want to add a preset to the playlist. Any ideas why?<br />
      <br />
      ps: i know this is a bit offtopic but since you are probably goning to read this thread again i thought i'd ask here:)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">20th December 2004 08:53 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>

      <blockquote>
        <i>Originally posted by fsk</i><br />
        <b>I read it in the help file, and because i cant get it to work i thought this was the reason. It crashes when i want to add a preset to the playlist. Any ideas why?</b>
      </blockquote>I just made it work without problem. Does it give you an error number/message so I can try to fix it?
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fsk</span><br />
      <span class="post-time small text-muted">20th December 2004 19:27 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">ok when i first run it after install it sais:<br />
      <br /></p>

      <blockquote>
        erreurd'execution '97':<br />
        <br />
        impossible d'appeler une function aime sur un objet qui n'est pas une instance de classe de definition
      </blockquote>after that it shuts down and when i run it again, and add a preset it just crashes without any error messages.
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">20th December 2004 19:52 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">The first error after install is normal (well, this is a bug coz the .ini isn't here yet).<br />
      I've no idea about your crash and the problem is that this is a 2 years old crappy VB program.<br />
      If enough peoples get interested maybe I can try to remake it using C/C++</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">fsk</span><br />
      <span class="post-time small text-muted">24th December 2004 08:28 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">that probably will not happen, so i gues this will die just like hotlist did:/.<br />
      <br />
      thx anyway:)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">24th December 2004 09:09 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I tested it on some computers (98/2K/XPsp1) while the week and I had no problem. Probably your problem is due to a dll-hell as I compiled it with a french edition of visual basic. If you have a VB6 compiler I can send you source code so that you can compile it by yourself and maybe solve your issue (pm me,I'll do my best to help you).</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">29th January 2005 18:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"><strong>Back to the topic ;)</strong><br />
      I just updated the .ape<br />
      <br />
      <a href="http://goebish.free.fr/vfx/aviplayer.jpg" target="_blank">http://goebish.free.fr/vfx/aviplayer.jpg</a><br />
      <br />
      ------------------------<br />
      V1.04 Changes Log<br />
      ------------------------<br />
      - faster chroma keying<br />
      - keys inverters<br />
      - adjustable blend mode<br />
      - .avi files folder selection<br />
      - configurable auto stream change</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">29th January 2005 23:34 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">nice ape, but why an own menu for that ape? shouldnt it be in the 'Render' menu?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">30th January 2005 06:23 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">from the AVS Wishlist:<br />
      Render / AVI: Ability to provide code to define playback speed (or current frame)<br />
      <br />
      You could implement that in your AVI player :)<br />
      setting the current frame might be hard though as you said your APE streams the AVIs instead of pre-loading them<br />
      <br />
      What about implementing the remaining blend modes? (by adding an option "Default renderer blend mode", like Render/Clear Screen has)<br />
      I can give you fast MMX code for all of the blend modes, especially for maximum/minimum blending.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">30th January 2005 09:17 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Can I access (at least read) global registers from inside my APE ?<br />
      How do I retrieve default renderer blend mode ?<br />
      <br />
      Thanks :)</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">31st January 2005 02:08 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">yes you can<br />
      if you didnt find out how yet, you prolly have an old SDK<br />
      get the new one here:<br />
      <a href="http://download.nullsoft.com/winamp/client/wa502_sdk.zip" target="_blank">http://download.nullsoft.com/winamp/.../wa502_sdk.zip</a><br />
      you can also make codable components with it<br />
      read the avs_ape.h file and you'll find out everything you need<br />
      further questions: post here or pm me :)<br />
      <br />
      btw: don't use the blend functions in that header. they're about the slowest thing possible to do the job :) PM me if you want MMX blend functions</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">31st January 2005 09:06 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">I didn't know there was a new ape SDK version. I'm just looking at it, thanks :)<br />
      My code use these BLEND &amp; BLEND_AVG functions, there're not so slow (but I use MMX asm for adjustable blend).<br />
      I'll try to implement missing render modes soon, I'll ask you if i've problem with it. Don't really know when I'll have time because I start my new job tomorrow, so maybe one of those week end :)<br />
      Is there an sample code for a codable component somewhere (so I can make x,y,w,h,speed &amp; frameskip codable) ?</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">2nd February 2005 09:12 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">i'm afraid there's no sample code anywhere...<br />
      you get a VM context handle with the "allocVM" function.<br />
      you should do this once per instance, so that every instance has its own variables and things like that.<br />
      the next thing you do (also once per instance) is registering variables. you might find this macro useful :) (modify to fit your variable name for the VM context)<br /></p>
      <pre>
<code><br />#define regvar(varname, initval) *(VMV_##varname = g_extinfo-&gt;regVMvariable(vmcontext, #varname)) = initval;<br /></code>
</pre><br />
      it registers a variable with the given name and initialises it to the given initvalue<br />
      example: regvar(w, (double)w);<br />
      you need to declare this variable somewhere (preferably in the class definition)<br />
      double *VMV_w;<br />
      <br />
      after you have completed these steps, you can compile code with the "compileVMcode" function. This function takes a VM context and a piece of code as parameters and returns a VM code handle.<br />
      you can then execute the code with the "executeCode" function.<br />
      when you're done, don't forget to free the code, using the "freeCode" function, and the VM, using the "freeVM" function.<br />
      <br />
      btw about that mmx stuff:<br />
      i have maximum blending in 2 MMX ops per 2 pixels and minimum blending in 3 MMX ops per 2 pixels (not including loading the mmx registers and storing the data back)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">2nd February 2005 17:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">Thank for your answer, I'll try to play with this VM.<br />
      I'm interested by your MMX routines but I need per pixel (not 2) because of keying as I don't render every pixels.<br />
      I need a function like:<br /></p>
      <pre>
<code>static unsigned int inline minblend(unsigned int a, unsigned int b)</code>
</pre>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">3rd February 2005 03:21 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content"></p>
      <pre>
<code><br />static unsigned int inline maxblend(unsigned int a, unsigned int b) {<br />    unsigned int tmp;<br />    __asm {<br />        movd    mm0, a<br />        movd    mm1, b<br />        PSUBUSB mm0, mm1<br />        PADDB   mm0, mm1<br />        movd    tmp, mm0<br />    }<br />    return tmp;<br />}<br />static unsigned int inline minblend(unsigned int a, unsigned int b) {<br />    unsigned int tmp;<br />    __asm {<br />        movd    mm0, a<br />        movd    mm1, b<br />        MOVQ    mm2, mm0<br />        PSUBUSB mm2, mm1<br />        PSUBUSB mm0, mm2<br />        movd    tmp, mm0<br />    }<br />    return tmp;<br />}<br /></code>
</pre><br />
      <br />
      don't forget "__asm emms" after you're done, or every floating point operation after that will fail (AVS code contains lots of floating point operations)
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">goebish</span><br />
      <span class="post-time small text-muted">3rd February 2005 06:31 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">You man are really great :)<br />
      As I said before I've not too much time now but I'll implement that one of these week end.</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">TomyLobo</span><br />
      <span class="post-time small text-muted">3rd February 2005 09:18 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">btw you should really think about doing the whole filtering (including keying) in MMX asm... i'm sure there's a lot of speed to gain this way</p>
    </div>
    <hr />

    <div class="post">
      <p class="post-meta"><span class="post-author text-primary">Yathosho</span><br />
      <span class="post-time small text-muted">16th February 2005 16:07 <abbr title="Coordinated Universal Time">UTC</abbr></span></p>

      <p class="post-content">would be helpful to add a version-resource to your APEs</p>
    </div>
    <hr />

    <div class="footer">
      <p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
    </div>
  </div><!-- Put JavaScript here -->
</body>
</html>
