<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">    <!-- Bootstrap core CSS -->
	<meta name="keywords" content=" saturation?, avs, advanced visualization studio, wvs, winamp visualization studio" />
	<meta name="description" content=" saturation? AVS" />
	
	<title> saturation? - Winamp Forums</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
<ol class="breadcrumb">
  <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>
  <li><a href="f-85.html">AVS</a></li>
  <li class="active">saturation?</li>
</ol>
<!-- div class="pda"><a href="t-242818.html?login=1" rel="nofollow">Log in</a></div -->
<p class="lead text-muted">Archive: <a title="Try the Wayback Machine" target="_blank" href="http://web.archive.org/web/*/http://forums.winamp.com/showthread.php?t=242818">saturation?</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username text-primary">Yathosho</div><div class="date small text-muted">6th April 2006, 21:00</div></div>
<br />
<div class="posttext">any hint how to increase the saturation of the colors of a preset? or will anybody do a tiny ape for this? ;)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Kar-mAVS</div><div class="date small text-muted">6th April 2006, 22:04</div></div>
<br />
<div class="posttext">It probably isnt the best solution, or the fastest or the anything, but if you put:<br />
level:<br />
red=(red-(((1-red)+(1-green)+(1-blue))*0.33))*2;<br />
green=(green-(((1-red)+(1-green)+(1-blue))*0.33))*2;<br />
blue=(blue-(((1-red)+(1-green)+(1-blue))*0.33))*2;<br />
<br />
into the colour modifier it maxes the saturation (sorta).....<br />
^_^ I guess for a subtler effect you could do<br />
<br />
red=((red-(((1-red)+(1-green)+(1-blue))*0.33))*2)*0.5+red*0.5;<br />
green=((green-(((1-red)+(1-green)+(1-blue))*0.33))*2)*0.5+green*0.5;<br />
blue=((blue-(((1-red)+(1-green)+(1-blue))*0.33))*2)*0.5+blue*0.<br />
<br />
someone (not me...) needs to optimise this...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">StevenRoy</div><div class="date small text-muted">7th April 2006, 05:41</div></div>
<br />
<div class="posttext">The Color Modifier calculates red, green, and blue simultaneously. This means that, before the equation is processed, the &quot;red&quot;, &quot;green&quot; and &quot;blue&quot; variables are set to the same values, so your code won't work the way it's intended to. That also means you can't mix channels with that effect.<br />
<br />
Programming an APE to do this would work, assuming there's still anyone out there who knows how to program a decent APE.<br />
<br />
For an effect similar to this, I think a &quot;Color Map&quot; could be a good approach. Use (R+G+B)/3 as the input, set the output to one of the &quot;Subtractive&quot; modes (I forget which is correct), and give it a black to gray gradient. (0,0,0 to 128,128,128.) This will make the image darker, so you'll want to follow that with a Trans/Multiplier (2x) to fix the brightness.<br />
<br />
Alternatively, it might be possible to use the Trans/Colorfade effect to do the same thing, but, frankly, that thing scares me.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">PAK-9</div><div class="date small text-muted">7th April 2006, 10:18</div></div>
<br />
<div class="posttext">You should be able to do it 'properly' with a color modifier. You need to convert the RGB to HSL, increase S and convert back to RGB. I have some code to convert HSL-&gt;RGB but not the other way around, I will paste it later when i get home (i might just write the color mod).</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">ASD5A</div><div class="date small text-muted">7th April 2006, 14:18</div></div>
<br />
<div class="posttext">it doesnt work with color mod since you cannot<br />
use all three channels for calculations.<br />
i.e. red=red*0.33+blue*0.33+green*0.33 wouldnt work.<br />
and you need to use all three channels to convert rgb to hsb or hsv</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">eheiney</div><div class="date small text-muted">7th April 2006, 15:26</div></div>
<br />
<div class="posttext">RGB -&gt; HSL (http://www.easyrgb.com/math.php?MATH=M18#text18)<br />
HSL -&gt; RGB (http://www.easyrgb.com/math.php?MATH=M19#text19)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">7th April 2006, 15:30</div></div>
<br />
<div class="posttext">Originally posted by StevenRoy <br />
I think a &quot;Color Map&quot; could be a good approach. Use (R+G+B)/3 as the input, set the output to one of the &quot;Subtractive&quot; modes, give it a black to gray gradient. This will make the image darker, so you'll want to follow that with a Trans/Multiplier (2x) to fix the brightness. <br />
Color Modifier can do sth like this all in one.<br />
<br />
look into this CM, maybe it's what is needed, although the colors are reduced in this process [but that's inevitable when increasing saturation, afaik]</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Yathosho</div><div class="date small text-muted">9th April 2006, 00:20</div></div>
<br />
<div class="posttext">cheers</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">StevenRoy</div><div class="date small text-muted">9th April 2006, 23:16</div></div>
<br />
<div class="posttext">Color Modifier can't mix channels. That's the problem. It works like some paint programs' &quot;Curves&quot; function. You can alter brightness and contrast, gamma, invert, solarize (AKA &quot;chrome&quot;), posterize (AKA &quot;color reduction&quot;), and all sorts of similar effects, but you can't mix channels with Color Modifier!<br />
<br />
Should I go into more detail about why this is?<br />
<br />
For that reason, you also can't convert RGB to HSL in a Color Modifier, or back again. The closest you can come to increasing saturation would be increasing the contrast instead. (Although that could be close enough in most situations, as excellently demonstrated by the &quot;saturation&quot; preset posted above by Grandchild.)<br />
<br />
Color Map, on the other hand, can do channel mixing. You can specify &quot;(R+G+B)/3&quot; as an input, and set the output mode to &quot;Subtractive 1&quot;, which gives you something very close to the before-mentioned &quot;(((1-red)+(1-green)+(1-blue))*0.33&quot;. From there, it's just a matter of finding the right gray value to get the effect you want, and then correcting the brightness afterward (equivalent to the *2 at the end of the equations Kar-mAVS posted here).<br />
<br />
I'm attaching a preset that demonstrates this technique for increasing saturation. Note that it demonstrates three different strengths of the effect, too, and you can click the mouse to select them. This is explained a little more in the comment.<br />
<br />
Hope this helps.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">PAK-9</div><div class="date small text-muted">10th April 2006, 12:37</div></div>
<br />
<div class="posttext">oops, forgot about this. Yea I did the code for RGB-&gt;HSL-&gt;RGB in a colour mod but as people are pointing out it doesn't work.<br />
<br />
You would have to paste the code into every place you do a render (assuming it is a codable component). I blame UnConeD for making colormod poo :P<br />
<br />
Would be best as an APE as you suggested originally</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">shreyas_potnis</div><div class="date small text-muted">11th April 2006, 15:17</div></div>
<br />
<div class="posttext">ok, i've got lots to learn here.<br />
why does doing something like red=blue in colour modifier cause no change?<br />
i was expecting the entire red channel to change.<br />
obviously i am missing something.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Grandchild</div><div class="date small text-muted">12th April 2006, 13:10</div></div>
<br />
<div class="posttext">the magic words here are hidden in the<br />
AVS Color Modifier - Expression Help:<br />
&quot;The color modifier allows you to modify the intensity of each color channel with respect to itself.&quot;<br />
which means that red can only take the values of red for reference.<br />
<br />
it might be more obvious when you know that the level box of the CMF is executed 256 times [pretty close to the number of color levels we have in RGB].<br />
<br />
I assume it's working like that:<br />
the first time the box gets evaluated it refers to all pixels that have: R=G=B=0. then it increases the reference-value by one each time the box gets evaluated.<br />
Now you can work with the new value [1/255 in our case], then it steps up to 2/255, 3/255, 4/255, ... ,255/255=1.<br />
But note, that at all time R=B=G is true!<br />
So exchanging rgb is pointless in a CMF<br />
<br />
See this post why it wouldn't be fast otherwise,<br />
http://forums.winamp.com/showthread.php?postid=1844232#post1844232</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">fsk</div><div class="date small text-muted">12th April 2006, 21:07</div></div>
<br />
<div class="posttext">i suck at expaining things but ill try anyway:).<br />
<br />
code in color mods level box:<br />
<br />
red=red*.2;<br />
green=green*.6;<br />
blue=blue*.5;<br />
<br />
now some pseudo code on what happens:<br />
<br />
for(i=0;i&lt;256;i++)<br />
{<br />
   red[i]=max(0,min(round(i*.2),255));<br />
   green[i]=max(0,min(round(i*.6),255));<br />
   blue[i]=max(0,min(round(i*.5),255));<br />
}<br />
<br />
then color mod goes over every pixel and does this:<br />
<br />
red=red[red];<br />
green=green[green];<br />
blue=blue[blue];<br />
<br />
this is as far as i can explain it:D.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">eheiney</div><div class="date small text-muted">13th April 2006, 06:26</div></div>
<br />
<div class="posttext">While we're all talking about colors, what's the square root of orange? :p</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">fsk</div><div class="date small text-muted">13th April 2006, 07:26</div></div>
<br />
<div class="posttext">what's the square root of orange?  <br />
<br />
16,11,0 :P</div></div><hr />
<div class="footer">
	<p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
</div>
</div>

</body>
</html>