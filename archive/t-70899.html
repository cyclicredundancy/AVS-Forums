<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">    <!-- Bootstrap core CSS -->
	<meta name="keywords" content=" Preset movement math, avs, advanced visualization studio, wvs, winamp visualization studio" />
	<meta name="description" content=" Preset movement math AVS" />
	
	<title> Preset movement math - Winamp Forums</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootswatch/3.0.1/readable/bootstrap.min.css" />

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
<ol class="breadcrumb">
  <li><a href="../index.html" class="glyphicon glyphicon-home"></a></li>
  <li><a href="f-85.html">AVS</a></li>
  <li class="active">Preset movement math</li>
</ol>
<!-- div class="pda"><a href="t-70899.html?login=1" rel="nofollow">Log in</a></div -->
<p class="lead text-muted">Archive: <a title="Try the Wayback Machine" target="_blank" href="http://web.archive.org/web/*/http://forums.winamp.com/showthread.php?t=70899">Preset movement math</a></p>
<hr />

<div class="post"><div class="posttop"><div class="username text-primary">geozop</div><div class="date small text-muted">5th January 2002, 18:00</div></div>
<br />
<div class="posttext">I have usually found that when using a preset movement, it doesn't quite move fast enough, rotate enough at a certain distance, or something that doesn't quite make it useful for what I need; even though it was quite close. Unfortunately, it does not tell you the math/equations that are the presets. If those were known<br />
<br />
 Some movements are easy enough to figure out the equations (such as shift rotate left), but others (like blocky partial out) elude me. I assume other AVS creators have similar problems, so I thought a topic for reverse-engineering these movement could help everyone.<br />
<br />
 Some that I have &quot;decoded&quot;:<br />
<br />
 big swirl out:<br />
d=d-sin(d)/25;<br />
r=r-0.2*(d-0.5)<br />
<br />
 medium swirl:<br />
d=d+0.001;<br />
r=r-0.025*cos(d*16)<br />
<br />
 sunburster:<br />
d=d-(sin(d)*0.1*abs(sin(r*18)));<br />
r=r+0.004<br />
 (I find that this works better than the preset, because ther preset has an up-and-left movement, in addition to the sunbursting)<br />
<br />
 swirling around both ways at once:<br />
d=d+0.001;<br />
r=r-0.1*cos(d*16+0.75)<br />
 (four times more than medium swirl, with a bit of an offset)<br />
<br />
 bubbling ******ds:<br />
d=d-0.025*pow(1.33*sin(d*2*1.57)-0.25,4);<br />
r=r-log(0.01+d)/100<br />
 (same thing as with sunburster, but the movement of the center did not look good without the r movement)<br />
<br />
 5 pointed distro:<br />
d=d-0.1*sin(d)*abs(sin(r*2.5+1.57));<br />
r=r+0.005<br />
 (it's a good likeness, but it's not as exact as I'd like)<br />
<br />
 I think blocky partial out can be done using rect coordinates... Slight fuzzify looks like it could be done like the swirl to center preset, except that the swirls are only a few pixels wide, rather than a third of the screen.<br />
<br />
 Hope that helped...</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Montana</div><div class="date small text-muted">5th January 2002, 19:31</div></div>
<br />
<div class="posttext">big thanks, (i think)</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UnConeD</div><div class="date small text-muted">5th January 2002, 21:57</div></div>
<br />
<div class="posttext">This one approximates the tunnel movement. The real 'tunnel' seems to have its rotation point slightly to the left of the center, but other than that it's near perfect.<br />
<br />
df=d-.16;df=if(below(df,0.02),0.02,df);<br />
d=d-sqr(df)*.23;r=r+0.035<br />
<br />
A tip for decoding the movements is to create a preset that contains this:<br />
<br />
-Effect List (Input: ignore / Output: replace)<br />
  Simple -&gt; Oscilloscope Dots<br />
  Movement (Original)<br />
-Effect List (Input: ignore / Output: subtractive blend 1)<br />
  Simple -&gt; Oscilloscope Dots<br />
  Movement (Your own)<br />
<br />
Now you will see the difference between the two movements. The brighter the picture, the worse you're doing. You should also see your movement as a 'black layer' over the original. It can help you decode the movement.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Montana</div><div class="date small text-muted">5th January 2002, 22:00</div></div>
<br />
<div class="posttext">unconed, whatta hell u talking about<br />
tunneling movement is<br />
d=sin(d);r=0.05+r</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UnConeD</div><div class="date small text-muted">5th January 2002, 22:04</div></div>
<br />
<div class="posttext">I was &quot;watta hell&quot; talking about another solution for the tunnel which I found experimentally. You found a shorter one, nice. If you compare the two graphs (pop the formula in a superscope and plot them), you'll see that mine strongly resembles a sine-wave near 0-1.<br />
I checked your solution with the two-effect-list trick though and it seems the rotation factor is slightly too high.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Montana</div><div class="date small text-muted">5th January 2002, 22:10</div></div>
<br />
<div class="posttext">adjust 0.05 to the value you want then</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">BlurPak2k1</div><div class="date small text-muted">6th January 2002, 00:19</div></div>
<br />
<div class="posttext">well i sound this out too.<br />
but d=sin(d); and d=atan(d); have simular effect as well.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">UnConeD</div><div class="date small text-muted">6th January 2002, 04:23</div></div>
<br />
<div class="posttext">By the way I think it's (sorta) impossible to do blocky partial out for now. I remember AVS not providing width/height in the movement, so you could only make it work on one resolution.<br />
<br />
Of course you can make something close, but the real idea here is to get exact copies right?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Montana</div><div class="date small text-muted">6th January 2002, 13:14</div></div>
<br />
<div class="posttext">blur&gt;&gt; not really, d=sin(d) has a move &quot;tunnel-like&quot; depth, while d=atan(d), cuts the whole picture in2 4 parts,<br />
<br />
unconed&gt;&gt; can u do the decode the &quot;bleedin&quot; movement</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">TasZ69</div><div class="date small text-muted">1st October 2006, 21:34</div></div>
<br />
<div class="posttext">Bleedin<br />
<br />
d=atan(d)*1.05;<br />
r=.01+r;<br />
<br />
I'm pretty sure this is it. i've got a slight problem remembering it right now.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Warrior of the Light</div><div class="date small text-muted">2nd October 2006, 07:14</div></div>
<br />
<div class="posttext">welcome to 2006.<br />
<br />
the code for bleedin' is:<br />
t = cos(d * $PI);<br />
r = r + (0.07 * t);<br />
d = d * (0.98 + t * 0.10);</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Mr_Nudge</div><div class="date small text-muted">2nd October 2006, 16:02</div></div>
<br />
<div class="posttext">who uses preset movement anyway?</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Warrior of the Light</div><div class="date small text-muted">2nd October 2006, 17:08</div></div>
<br />
<div class="posttext">oh, I see this is your first post here.. Welcome!</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">TasZ69</div><div class="date small text-muted">4th October 2006, 00:52</div></div>
<br />
<div class="posttext">ya, that was my first. i'm using a friends internet cuz i don't have any, so i couldn't check to see i was right. mine's actually kinda close. it's something from a really old avs i made when i first got winamp (2.something I think). but ya, thanx for the welcome.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">Montana</div><div class="date small text-muted">4th October 2006, 09:29</div></div>
<br />
<div class="posttext">oh god at the noobness of me. i'm uberembarrased.</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">StevenRoy</div><div class="date small text-muted">4th October 2006, 09:46</div></div>
<br />
<div class="posttext">Oh, it's possible to do a &quot;Blocky Partial Out&quot;. I've recently experimented with some very similar effects in Movement code. The trick is to use extra variables to actually COUNT the pixels (instead of relying on sw and sh). For example:<br />
<br />
nr=equal(y,yy); // &quot;New Row&quot; is 0 when y changes.<br />
nx=nr*((nx+1)&amp;3); // Either increment or reset nx (from 0 to 3)<br />
ny=(ny+bnot(nr))&amp;3; // Increment ny (from 0 to 3) when y changes<br />
yy=y; // This is how we tell when it changes.<br />
<br />
vx=if(nx,vx,x); // Save X and Y coordinates for each 4x4 square's<br />
vy=if(ny-1,vy,y); // upper left pixel.<br />
<br />
insq=(nx&amp;2)|((ny-1)&amp;2); // &quot;In square&quot; is 0 if we're in one of the 2x2 squares.<br />
x=if(insq,x,(vx*7)/8); // If we are, perform the magic!<br />
y=if(insq,y,(vy*7)/8);<br />
<br />
Well, it's still not -exactly- like the BPO, but it's the best approximation I can come up with this late at night.<br />
<br />
This pixel-counting trick is so unobvious (especially for something like a Movement that isn't dynamic!), I was -so- tempted to keep it a secret, just so that I could use it in a preset (for the compilation, of course) and then have a bunch of people thinking &quot;How the heck did he do that?&quot; ...I love when people think that!<br />
<br />
But there it is.<br />
<br />
I bet you guys (well, a few of you) can turn it into all sorts of nifty stuff now! Have fun!</div></div><hr />


<div class="post"><div class="posttop"><div class="username text-primary">jheriko</div><div class="date small text-muted">5th October 2006, 16:16</div></div>
<br />
<div class="posttext">Originally posted by Mr_Nudge <br />
who uses preset movement anyway?  <br />
<br />
I love movement. Good for making arbitrarily complex raytraces in realtime :) (given a small loading time) Also there are other nifty tricks you can do with its per-pixel accuracy which dynamic movement forbids with its terrible resolution. See 'Jheriko - There is no Spoon'.<br />
<br />
StevenRoy: I hate to belittle your fantastic discovery, but why not use sw and sh? Counting those pixels is a good idea, but more work (code) for no obvious benefit (to me). I'd also be willing to bet someone has done the counting trick before since it is quite trivial.<br />
<br />
BTW: Another good place to 'count pixels' is in a Dynamic Movement, althought the utility is somewhat different: you can 'count' the current position in the grid and use it to access (g)megabuf for whatever reason. (Creating a faster Whittaker solver maybe ;) )<br />
<br />
Anyway, maybe someone should lock this age-old thread now that the problems are solved and it is outdated?</div></div><hr />
<div class="footer">
	<p class="text-muted small">Fork me on <a href="https://github.com/visbot/AVS-Forums/">GitHub</a></p>
</div>
</div>

</body>
</html>